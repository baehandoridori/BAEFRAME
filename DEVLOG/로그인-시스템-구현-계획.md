# ë¡œê·¸ì¸ ì‹œìŠ¤í…œ êµ¬í˜„ ê³„íš

## ìš”ì•½

| í•­ëª© | ìˆ˜ì • íŒŒì¼ | ì´ìœ  | ìš°ì„ ìˆœìœ„ | ìƒíƒœ |
|------|----------|------|---------|------|
| Phase 1 | main/ipc-handlers.js, preload/preload.js | ì¸ì¦ íŒŒì¼ ì½ê¸°/ì“°ê¸° IPC | ë†’ìŒ | â¬œ ëŒ€ê¸° |
| Phase 2 | renderer/scripts/modules/auth-manager.js (ì‹ ê·œ) | ì¸ì¦ ë¡œì§ ëª¨ë“ˆ | ë†’ìŒ | â¬œ ëŒ€ê¸° |
| Phase 3 | renderer/scripts/modules/user-settings.js | ë¡œê·¸ì¸ ì—°ë™ | ë†’ìŒ | â¬œ ëŒ€ê¸° |
| Phase 4 | renderer/index.html, renderer/styles/ | ë¡œê·¸ì¸ UI | ë†’ìŒ | â¬œ ëŒ€ê¸° |
| Phase 5 | renderer/scripts/modules/comment-manager.js | ì½”ë©˜íŠ¸ ê¶Œí•œ ì²´í¬ | ë†’ìŒ | â¬œ ëŒ€ê¸° |
| Phase 6 | ì „ì²´ | í…ŒìŠ¤íŠ¸ ë° ì—£ì§€ì¼€ì´ìŠ¤ | ì¤‘ê°„ | â¬œ ëŒ€ê¸° |

---

## ë°°ê²½ ë° ëª©ì 

### ì™œ í•„ìš”í•œê°€?
í˜„ì¬ BAEFRAMEì€ ì‚¬ìš©ì ì´ë¦„ë§Œ ì„¤ì •í•˜ë©´ ëˆ„êµ¬ë‚˜ í•´ë‹¹ ì´ë¦„ìœ¼ë¡œ í™œë™í•  ìˆ˜ ìˆìŒ. ì´ë¡œ ì¸í•´:
- ë‹¤ë¥¸ ì‚¬ëŒ ì´ë¦„ìœ¼ë¡œ ì½”ë©˜íŠ¸ ì‘ì„± ê°€ëŠ¥
- ë‹¤ë¥¸ ì‚¬ëŒì˜ ì½”ë©˜íŠ¸ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
- ì±…ì„ ì†Œì¬ê°€ ë¶ˆë¶„ëª…

### í•´ê²°í•˜ë ¤ëŠ” ë¬¸ì œ
- íŠ¹ì • ì´ë¦„(íŒ€ì›)ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•˜ì—¬ ë³¸ì¸ë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ
- ë³¸ì¸ ì½”ë©˜íŠ¸ë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥í•˜ë„ë¡ ì œí•œ
- ë¹„ë°€ë²ˆí˜¸ ì—†ëŠ” ì´ë¦„(ì™¸ë¶€ ë¦¬ë·°ì–´ ë“±)ì€ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥

### í•µì‹¬ ìš”êµ¬ì‚¬í•­
1. **ë¹„ë°€ë²ˆí˜¸ ë³´í˜¸ ì‚¬ìš©ì**: íŠ¹ì • ì´ë¦„ë“¤ì—ë§Œ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
2. **ë¹„ë°€ë²ˆí˜¸ ì—†ëŠ” ì‚¬ìš©ì**: ììœ ë¡­ê²Œ ì‚¬ìš© (ë³¸ì¸ ì½”ë©˜íŠ¸ë§Œ ìˆ˜ì •/ì‚­ì œ)
3. **ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸**: ëª¨ë‘ "1234" â†’ ê°ì ê°œì¸ ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½
4. **ë¡œê·¸ì¸ ìœ ì§€**: ì•± ì¬ì‹œì‘í•´ë„ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€ (ì¬ì…ë ¥ ë¶ˆí•„ìš”)
5. **ë¹„ë°€ë²ˆí˜¸ ë³€ê²½**: ì´ì „ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ â†’ ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •

### ëª…ì‹œì ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ê²ƒ
- ë³µì¡í•œ ë³´ì•ˆ (í•´í‚¹ ë°©ì§€ ìˆ˜ì¤€ì˜ ì•”í˜¸í™” ë¶ˆí•„ìš”)
- ì›¹ ë·°ì–´ ë¡œê·¸ì¸ (ë°ìŠ¤í¬íƒ‘ ì•±ë§Œ í•´ë‹¹)
- ì„¸ì…˜ ì ê¸ˆ/íƒ€ì„ì•„ì›ƒ
- ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°/ë³µêµ¬ ê¸°ëŠ¥

---

## í™˜ê²½ íŠ¹ì„± (ì¤‘ìš”!)

### íŒ€ ì‚¬ìš© í™˜ê²½
```
G:\ (Google Drive ê³µìœ  ë“œë¼ì´ë¸Œ)
â”œâ”€â”€ ìë£Œì‹¤\
â”‚   â”œâ”€â”€ BAEFRAME.exe          â† ëª¨ë“  íŒ€ì›ì´ ë™ì¼í•œ exe ì‹¤í–‰
â”‚   â”œâ”€â”€ baeframe-auth.dat     â† ì¸ì¦ íŒŒì¼ (ì•±ì´ ìë™ ìƒì„±)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ í”„ë¡œì íŠ¸A\
â”‚   â””â”€â”€ video.bframe
â””â”€â”€ í”„ë¡œì íŠ¸B\
    â””â”€â”€ video.bframe
```

### í•µì‹¬ ì¸ì‚¬ì´íŠ¸
- **ëª¨ë“  íŒ€ì›ì´ ê°™ì€ exe íŒŒì¼ ì‚¬ìš©** â†’ exe ì˜†ì— ì¸ì¦ íŒŒì¼ ë‘ë©´ ìë™ ê³µìœ 
- **Google Drive ë™ê¸°í™”** â†’ í•œ ëª…ì´ ë³€ê²½í•˜ë©´ ì „ íŒ€ì›ì—ê²Œ ì ìš©
- **ì„œë²„ ë¶ˆí•„ìš”** â†’ íŒŒì¼ ê¸°ë°˜ìœ¼ë¡œ ì¤‘ì•™ DBì²˜ëŸ¼ ë™ì‘

---

## ë°ì´í„° êµ¬ì¡°

### ì¸ì¦ íŒŒì¼ (baeframe-auth.dat)

**ìœ„ì¹˜**: exe íŒŒì¼ê³¼ ê°™ì€ í´ë”
**í˜•ì‹**: JSON (Base64 ì¸ì½”ë”©ìœ¼ë¡œ ëˆˆì— ì•ˆ ë„ê²Œ)

```javascript
// ì‹¤ì œ ì €ì¥ í˜•íƒœ: Base64 ì¸ì½”ë”©ëœ ë¬¸ìì—´
// eyJ1c2VycyI6W3sibmFtZSI6...

// ë””ì½”ë”©ëœ ë‚´ìš©:
{
  "version": 1,
  "users": [
    {
      "name": "í•œì†”",
      "passwordHash": "sha256í•´ì‹œê°’",  // í‰ë¬¸ ëŒ€ì‹  í•´ì‹œ ì €ì¥
      "createdAt": "2024-01-10T10:00:00.000Z",
      "updatedAt": "2024-01-15T14:30:00.000Z"
    },
    {
      "name": "ì„±ì›",
      "passwordHash": "sha256í•´ì‹œê°’",
      "createdAt": "2024-01-10T10:00:00.000Z",
      "updatedAt": "2024-01-10T10:00:00.000Z"
    }
  ]
}
```

**ì™œ Base64 + SHA256?**
- Base64: íŒŒì¼ ì—´ì–´ë„ ë‚´ìš©ì´ ë°”ë¡œ ì•ˆ ë³´ì„ (íŒ€ì›ë“¤ì´ ì‹¤ìˆ˜ë¡œ ê±´ë“œë¦¬ì§€ ì•Šê²Œ)
- SHA256: ë¹„ë°€ë²ˆí˜¸ í‰ë¬¸ ì €ì¥ ë°©ì§€ (ê¸°ë³¸ì ì¸ ë³´í˜¸)
- ë³µì¡í•œ ì•”í˜¸í™”ëŠ” ë¶ˆí•„ìš” (ìš”êµ¬ì‚¬í•­ì— ë”°ë¼)

### ë¡œì»¬ ì„¸ì…˜ íŒŒì¼ (user-settings.json í™•ì¥)

**ìœ„ì¹˜**: `%APPDATA%\baeframe\settings\user-settings.json` (ê¸°ì¡´ íŒŒì¼)

```javascript
{
  "userName": "í•œì†”",
  "userSource": "manual",
  // ... ê¸°ì¡´ í•„ë“œë“¤ ...

  // ì¶”ê°€ë˜ëŠ” í•„ë“œ
  "isAuthenticated": true,      // ë¡œê·¸ì¸ ìƒíƒœ
  "authToken": "ëœë¤í† í°ê°’",     // ì„¸ì…˜ í† í° (ë¡œê·¸ì¸ ìœ ì§€ìš©)
  "lastAuthAt": "2024-01-15T14:30:00.000Z"
}
```

**ì™œ authToken?**
- ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¡œì»¬ì— ì €ì¥í•˜ì§€ ì•Šê¸° ìœ„í•¨
- ì•± ì¬ì‹œì‘ ì‹œ í† í°ìœ¼ë¡œ ìë™ ë¡œê·¸ì¸
- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹œ í† í° ê°±ì‹  â†’ ë‹¤ë¥¸ PCì—ì„œ ì¬ë¡œê·¸ì¸ í•„ìš”

---

## Phase 1: ì¸ì¦ íŒŒì¼ IPC í•¸ë“¤ëŸ¬

### ëª©í‘œ
ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì¸ì¦ íŒŒì¼ ì½ê¸°/ì“°ê¸° ê¸°ëŠ¥ êµ¬í˜„

### ìˆ˜ì • íŒŒì¼
- `main/ipc-handlers.js`
- `preload/preload.js`

### êµ¬í˜„ ë‚´ìš©

#### main/ipc-handlers.js
```javascript
// ì¸ì¦ íŒŒì¼ ê²½ë¡œ (exeì™€ ê°™ì€ í´ë”)
const getAuthFilePath = () => {
  // ê°œë°œ ëª¨ë“œ: í”„ë¡œì íŠ¸ ë£¨íŠ¸
  // í”„ë¡œë•ì…˜: exe íŒŒì¼ ìœ„ì¹˜
  const basePath = app.isPackaged
    ? path.dirname(process.execPath)
    : app.getAppPath();
  return path.join(basePath, 'baeframe-auth.dat');
};

// ì¸ì¦ ë°ì´í„° ë¡œë“œ
ipcMain.handle('auth:load', async () => {
  const filePath = getAuthFilePath();
  if (!fs.existsSync(filePath)) {
    return { success: true, data: null };
  }
  const encoded = await fs.promises.readFile(filePath, 'utf-8');
  const decoded = Buffer.from(encoded, 'base64').toString('utf-8');
  return { success: true, data: JSON.parse(decoded) };
});

// ì¸ì¦ ë°ì´í„° ì €ì¥
ipcMain.handle('auth:save', async (event, data) => {
  const filePath = getAuthFilePath();
  const json = JSON.stringify(data, null, 2);
  const encoded = Buffer.from(json).toString('base64');
  await fs.promises.writeFile(filePath, encoded, 'utf-8');
  return { success: true };
});
```

#### preload/preload.js
```javascript
// contextBridge.exposeInMainWorld('electronAPI', { ... })ì— ì¶”ê°€
loadAuthData: () => ipcRenderer.invoke('auth:load'),
saveAuthData: (data) => ipcRenderer.invoke('auth:save', data),
```

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- Google Drive ë™ê¸°í™” ì¶©ëŒ (ë™ì‹œ ìˆ˜ì • ì‹œ)
  - ì™„í™”: ì €ì¥ ì „ ìµœì‹  ë°ì´í„° ë¡œë“œ í›„ ë¨¸ì§€

---

## Phase 2: ì¸ì¦ ë§¤ë‹ˆì € ëª¨ë“ˆ

### ëª©í‘œ
ì¸ì¦ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ë…ë¦½ ëª¨ë“ˆ ìƒì„±

### ìˆ˜ì • íŒŒì¼
- `renderer/scripts/modules/auth-manager.js` (ì‹ ê·œ)

### êµ¬í˜„ ë‚´ìš©

```javascript
// auth-manager.js
class AuthManager {
  constructor() {
    this.authData = null;       // ì „ì²´ ì¸ì¦ ë°ì´í„°
    this.currentUser = null;    // í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì
    this.isAuthenticated = false;
  }

  // ì´ˆê¸°í™” (ì•± ì‹œì‘ ì‹œ)
  async init() {
    await this._loadAuthData();
    await this._restoreSession();
  }

  // ì‚¬ìš©ì ë“±ë¡ (ìƒˆ íŒ€ì› ì¶”ê°€)
  async registerUser(name) {
    const initialPassword = '1234';
    const hash = await this._hashPassword(initialPassword);

    this.authData.users.push({
      name,
      passwordHash: hash,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    });

    await this._saveAuthData();
  }

  // ë¡œê·¸ì¸
  async login(name, password) {
    const user = this._findUser(name);

    // ë¹„ë°€ë²ˆí˜¸ ë³´í˜¸ ì‚¬ìš©ì
    if (user) {
      const hash = await this._hashPassword(password);
      if (hash !== user.passwordHash) {
        throw new Error('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');
      }
      this.currentUser = user;
      this.isAuthenticated = true;
      await this._saveSession();
      return { protected: true };
    }

    // ë¹„ë°€ë²ˆí˜¸ ì—†ëŠ” ì‚¬ìš©ì (ììœ  ì‚¬ìš©)
    this.currentUser = { name, protected: false };
    this.isAuthenticated = true;
    await this._saveSession();
    return { protected: false };
  }

  // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
  async changePassword(oldPassword, newPassword) {
    if (!this.currentUser?.name) {
      throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
    }

    const user = this._findUser(this.currentUser.name);
    if (!user) {
      throw new Error('ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì•„ë‹™ë‹ˆë‹¤');
    }

    // ì´ì „ ë¹„ë°€ë²ˆí˜¸ í™•ì¸
    const oldHash = await this._hashPassword(oldPassword);
    if (oldHash !== user.passwordHash) {
      throw new Error('í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');
    }

    // ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
    user.passwordHash = await this._hashPassword(newPassword);
    user.updatedAt = new Date().toISOString();

    // í† í° ê°±ì‹  (ë‹¤ë¥¸ PCì—ì„œ ì¬ë¡œê·¸ì¸ í•„ìš”)
    await this._saveAuthData();
    await this._saveSession();
  }

  // í˜„ì¬ ì‚¬ìš©ìê°€ í•´ë‹¹ ì½”ë©˜íŠ¸ë¥¼ ìˆ˜ì •/ì‚­ì œí•  ìˆ˜ ìˆëŠ”ì§€
  canEditComment(comment) {
    if (!this.isAuthenticated) return false;
    return comment.author === this.currentUser.name;
  }

  // ì‚¬ìš©ìê°€ ë³´í˜¸ëœ ì‚¬ìš©ìì¸ì§€ í™•ì¸
  isProtectedUser(name) {
    return !!this._findUser(name);
  }

  // --- Private ---

  async _hashPassword(password) {
    // Web Crypto API ì‚¬ìš©
    const encoder = new TextEncoder();
    const data = encoder.encode(password + 'baeframe_salt');
    const hashBuffer = await crypto.subtle.digest('SHA-256', data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
  }

  _findUser(name) {
    return this.authData?.users?.find(u => u.name === name);
  }

  async _loadAuthData() {
    const result = await window.electronAPI.loadAuthData();
    this.authData = result.data || { version: 1, users: [] };
  }

  async _saveAuthData() {
    await window.electronAPI.saveAuthData(this.authData);
  }

  async _saveSession() {
    // user-settings.jsì™€ ì—°ë™í•˜ì—¬ ì„¸ì…˜ ì €ì¥
  }

  async _restoreSession() {
    // ì•± ì‹œì‘ ì‹œ ì €ì¥ëœ ì„¸ì…˜ìœ¼ë¡œ ìë™ ë¡œê·¸ì¸
  }
}

export const authManager = new AuthManager();
```

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- ì„¸ì…˜ í† í° ê´€ë¦¬ ë³µì¡ì„±
  - ì™„í™”: ê°„ë‹¨í•œ UUID í† í° ì‚¬ìš©, ë³µì¡í•œ JWT ë¶ˆí•„ìš”

---

## Phase 3: user-settings.js ë¡œê·¸ì¸ ì—°ë™

### ëª©í‘œ
ê¸°ì¡´ ì‚¬ìš©ì ì„¤ì • ì‹œìŠ¤í…œê³¼ ì¸ì¦ ì‹œìŠ¤í…œ í†µí•©

### ìˆ˜ì • íŒŒì¼
- `renderer/scripts/modules/user-settings.js`

### êµ¬í˜„ ë‚´ìš©

```javascript
// setUserName ìˆ˜ì •
async setUserName(name) {
  // ë³´í˜¸ëœ ì‚¬ìš©ìì¸ì§€ í™•ì¸
  if (authManager.isProtectedUser(name)) {
    // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ìš” â†’ ì´ë²¤íŠ¸ ë°œìƒ
    this._emit('passwordRequired', { name });
    return false;
  }

  // ë¹„ë°€ë²ˆí˜¸ ì—†ëŠ” ì‚¬ìš©ì â†’ ë°”ë¡œ ì„¤ì •
  await authManager.login(name, null);
  this.settings.userName = name;
  this.settings.isAuthenticated = true;
  this._save();
  return true;
}

// ë¡œê·¸ì¸ ì™„ë£Œ í›„ í˜¸ì¶œ
async onLoginSuccess(name) {
  this.settings.userName = name;
  this.settings.isAuthenticated = true;
  this._save();
}
```

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- ê¸°ì¡´ í”Œë¡œìš°ì™€ ì¶©ëŒ
  - ì™„í™”: ê¸°ì¡´ setUserName í˜¸ì¶œë¶€ ëª¨ë‘ í™•ì¸ í›„ ìˆ˜ì •

---

## Phase 4: ë¡œê·¸ì¸ UI

### ëª©í‘œ
ë¡œê·¸ì¸/ë¹„ë°€ë²ˆí˜¸ ë³€ê²½/ì‚¬ìš©ì ë“±ë¡ UI êµ¬í˜„

### ìˆ˜ì • íŒŒì¼
- `renderer/index.html` (ëª¨ë‹¬ ì¶”ê°€)
- `renderer/styles/main.css` (ìŠ¤íƒ€ì¼)
- `renderer/scripts/app.js` (ì´ë²¤íŠ¸ í•¸ë“¤ë§)

### UI ìš”ì†Œ

#### 1. ë¡œê·¸ì¸ ëª¨ë‹¬ (ë¹„ë°€ë²ˆí˜¸ ë³´í˜¸ ì‚¬ìš©ì ì„ íƒ ì‹œ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ”’ ë¡œê·¸ì¸                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì‚¬ìš©ì: í•œì†”                        â”‚
â”‚                                     â”‚
â”‚  ë¹„ë°€ë²ˆí˜¸: [________]               â”‚
â”‚                                     â”‚
â”‚  [ë¡œê·¸ì¸]              [ì·¨ì†Œ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ (ì„¤ì • ë©”ë‰´ì— ì¶”ê°€)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ğŸ” ë¹„ë°€ë²ˆí˜¸ ë³€ê²½                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  í˜„ì¬ ë¹„ë°€ë²ˆí˜¸: [________]           â”‚
â”‚  ìƒˆ ë¹„ë°€ë²ˆí˜¸:   [________]           â”‚
â”‚  ë¹„ë°€ë²ˆí˜¸ í™•ì¸: [________]           â”‚
â”‚                                     â”‚
â”‚  [ë³€ê²½]                [ì·¨ì†Œ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. ì‚¬ìš©ì ê´€ë¦¬ (ì„¤ì • ë©”ë‰´ì— ì¶”ê°€)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ğŸ‘¥ ì‚¬ìš©ì ê´€ë¦¬                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë“±ë¡ëœ ì‚¬ìš©ì:                      â”‚
â”‚  â€¢ í•œì†” (ë³´í˜¸ë¨)                     â”‚
â”‚  â€¢ ì„±ì› (ë³´í˜¸ë¨)                     â”‚
â”‚  â€¢ ë¯¼ìˆ˜ (ë³´í˜¸ë¨)                     â”‚
â”‚                                     â”‚
â”‚  [+ ìƒˆ ì‚¬ìš©ì ë“±ë¡]                  â”‚
â”‚                                     â”‚
â”‚  â€» ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸: 1234              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- ê¸°ì¡´ ì´ë¦„ ì„¤ì • ëª¨ë‹¬ê³¼ì˜ í†µí•©
  - ì™„í™”: ê¸°ì¡´ ëª¨ë‹¬ íë¦„ ìœ ì§€, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ë§Œ ì¶”ê°€

---

## Phase 5: ì½”ë©˜íŠ¸ ê¶Œí•œ ì²´í¬

### ëª©í‘œ
ë³¸ì¸ ì½”ë©˜íŠ¸ë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥í•˜ë„ë¡ ì œí•œ

### ìˆ˜ì • íŒŒì¼
- `renderer/scripts/modules/comment-manager.js`
- ê´€ë ¨ UI íŒŒì¼ë“¤

### êµ¬í˜„ ë‚´ìš©

#### comment-manager.js
```javascript
// ë§ˆì»¤ ìˆ˜ì •
updateMarker(markerId, updates) {
  const marker = this.getMarker(markerId);

  // ê¶Œí•œ ì²´í¬
  if (!authManager.canEditComment(marker)) {
    console.warn('ê¶Œí•œ ì—†ìŒ: ë³¸ì¸ ì½”ë©˜íŠ¸ë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');
    this._emit('permissionDenied', { action: 'update', marker });
    return false;
  }

  // ê¸°ì¡´ ë¡œì§...
}

// ë§ˆì»¤ ì‚­ì œ
deleteMarker(markerId) {
  const marker = this.getMarker(markerId);

  // ê¶Œí•œ ì²´í¬
  if (!authManager.canEditComment(marker)) {
    console.warn('ê¶Œí•œ ì—†ìŒ: ë³¸ì¸ ì½”ë©˜íŠ¸ë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');
    this._emit('permissionDenied', { action: 'delete', marker });
    return false;
  }

  // ê¸°ì¡´ ë¡œì§...
}
```

#### UI ì²˜ë¦¬
- ë‹¤ë¥¸ ì‚¬ëŒ ì½”ë©˜íŠ¸: ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ë¹„í™œì„±í™” ë˜ëŠ” ìˆ¨ê¹€
- ê¶Œí•œ ì—†ìŒ ì‹œ: í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ "ë³¸ì¸ ì½”ë©˜íŠ¸ë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- ê¸°ì¡´ ì½”ë©˜íŠ¸ì˜ authorì™€ ë¡œê·¸ì¸ ì´ë¦„ ë¶ˆì¼ì¹˜ (ê³µë°±, ëŒ€ì†Œë¬¸ì ë“±)
  - ì™„í™”: ì´ë¦„ ë¹„êµ ì‹œ trim() ì²˜ë¦¬

---

## Phase 6: í…ŒìŠ¤íŠ¸ ë° ì—£ì§€ì¼€ì´ìŠ¤

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ì‹ ê·œ ì‚¬ìš©ì ë“±ë¡**
   - ì‚¬ìš©ì ê´€ë¦¬ì—ì„œ ìƒˆ ì‚¬ìš©ì ë“±ë¡
   - ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ "1234"ë¡œ ë¡œê·¸ì¸ í™•ì¸

2. **ë¹„ë°€ë²ˆí˜¸ ë³€ê²½**
   - ì´ì „ ë¹„ë°€ë²ˆí˜¸ í‹€ë¦¬ë©´ ì‹¤íŒ¨
   - ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ ì„±ê³µ

3. **ë‹¤ë¥¸ PCì—ì„œ ë¡œê·¸ì¸**
   - A PCì—ì„œ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
   - B PCì—ì„œ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ í•„ìš”

4. **ì½”ë©˜íŠ¸ ê¶Œí•œ**
   - ë³¸ì¸ ì½”ë©˜íŠ¸: ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
   - íƒ€ì¸ ì½”ë©˜íŠ¸: ìˆ˜ì •/ì‚­ì œ ë¶ˆê°€

5. **ë¹„ë³´í˜¸ ì‚¬ìš©ì**
   - ë“±ë¡ ì•ˆ ëœ ì´ë¦„ìœ¼ë¡œ ììœ ë¡­ê²Œ ë¡œê·¸ì¸
   - ë³¸ì¸ ì½”ë©˜íŠ¸ë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥

6. **ê¸°ì¡´ ì½”ë©˜íŠ¸ í˜¸í™˜ì„±**
   - ì´ì „ì— "í•œì†”"ë¡œ ì‘ì„±í•œ ì½”ë©˜íŠ¸
   - ìƒˆ ì‹œìŠ¤í…œì—ì„œ "í•œì†”"ë¡œ ë¡œê·¸ì¸ í›„ ìˆ˜ì • ê°€ëŠ¥

### ì—£ì§€ì¼€ì´ìŠ¤

- Google Drive ë™ê¸°í™” ì¶©ëŒ (ë‘ ëª…ì´ ë™ì‹œì— ë¹„ë°€ë²ˆí˜¸ ë³€ê²½)
- ì¸ì¦ íŒŒì¼ ì†ìƒ/ì‚­ì œ ì‹œ ë³µêµ¬
- ì˜¤í”„ë¼ì¸ ìƒíƒœì—ì„œ ë¡œê·¸ì¸

---

## ë¦¬ìŠ¤í¬ ë° ìš°ë ¤ ì‚¬í•­

| ë¦¬ìŠ¤í¬ | ì‹¬ê°ë„ | ì™„í™” ë°©ì•ˆ |
|--------|--------|----------|
| Drive ë™ê¸°í™” ì¶©ëŒ | ì¤‘ê°„ | ì €ì¥ ì „ ìµœì‹  ë°ì´í„° ë¡œë“œ í›„ ë¨¸ì§€ |
| ì¸ì¦ íŒŒì¼ ì‚­ì œ | ë‚®ìŒ | íŒŒì¼ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„± (ëª¨ë“  ì‚¬ìš©ì ì¬ë“±ë¡ í•„ìš”) |
| ë¹„ë°€ë²ˆí˜¸ ë¶„ì‹¤ | ë‚®ìŒ | ê´€ë¦¬ìê°€ ì§ì ‘ íŒŒì¼ í¸ì§‘ (Base64 ë””ì½”ë”©) |
| ì´ë¦„ ë¶ˆì¼ì¹˜ | ë‚®ìŒ | trim() ì²˜ë¦¬, ëŒ€ì†Œë¬¸ì êµ¬ë¶„ |

---

## êµ¬í˜„ ìˆœì„œ ìš”ì•½

```
1. Phase 1: IPC í•¸ë“¤ëŸ¬ (ì¸ì¦ íŒŒì¼ ì½ê¸°/ì“°ê¸°)
   â†“
2. Phase 2: AuthManager ëª¨ë“ˆ (ì¸ì¦ ë¡œì§)
   â†“
3. Phase 3: user-settings.js ì—°ë™
   â†“
4. Phase 4: UI (ë¡œê·¸ì¸/ë¹„ë°€ë²ˆí˜¸ ë³€ê²½/ì‚¬ìš©ì ê´€ë¦¬)
   â†“
5. Phase 5: ì½”ë©˜íŠ¸ ê¶Œí•œ ì²´í¬
   â†“
6. Phase 6: í…ŒìŠ¤íŠ¸
```

---

## ì°¸ê³ : í˜„ì¬ ê´€ë ¨ ì½”ë“œ ìœ„ì¹˜

| íŒŒì¼ | ì—­í•  |
|------|------|
| `main/ipc-handlers.js` | IPC í•¸ë“¤ëŸ¬ (settings:load/save ì°¸ê³ ) |
| `preload/preload.js` | IPC ë¸Œë¦¿ì§€ |
| `renderer/scripts/modules/user-settings.js` | ì‚¬ìš©ì ì„¤ì • ê´€ë¦¬ |
| `renderer/scripts/modules/comment-manager.js` | ì½”ë©˜íŠ¸ CRUD |
| `renderer/scripts/app.js` | ë©”ì¸ ì•± ë¡œì§ |
| `renderer/index.html` | UI (ëª¨ë‹¬ ë“±) |

---

## ì¶”í›„ ê³ ë ¤ ê°€ëŠ¥í•œ í™•ì¥

- ê´€ë¦¬ì ê¶Œí•œ (ë‹¤ë¥¸ ì‚¬ëŒ ì½”ë©˜íŠ¸ ì‚­ì œ ê°€ëŠ¥)
- ë¹„ë°€ë²ˆí˜¸ ë³µì¡ì„± ìš”êµ¬ì‚¬í•­
- ì›¹ ë·°ì–´ ë¡œê·¸ì¸ ì§€ì›
- ë¡œê·¸ì¸ íˆìŠ¤í† ë¦¬/ë¡œê·¸

**í˜„ì¬ ìš”êµ¬ì‚¬í•­ì—ì„œëŠ” ë¶ˆí•„ìš”í•˜ë¯€ë¡œ êµ¬í˜„í•˜ì§€ ì•ŠìŒ**
