# ì²« ê³µì‹ ì‚¬ìš© í•«í”½ìŠ¤ - #97 ì´ìŠˆ í•´ê²° ê³„íš

> GitHub Issue: [#97 ë°°í”„ë ˆì„ 1ì°¨ ê³µì‹ ì‚¬ìš© ì´í›„ ì•Œë ¤ì§„ ì´ìŠˆ](https://github.com/baehandoridori/BAEFRAME/issues/97)
> ì‘ì„±ì¼: 2026-02-14
> ëŒ€ìƒ ë¸Œëœì¹˜: `main` (í˜„ì¬ ë¹Œë“œ ë²„ì „ ê¸°ì¤€)

---

## ìš”ì•½

| # | í•­ëª© | ìˆ˜ì • íŒŒì¼ | ìš°ì„ ìˆœìœ„ | ë‚œì´ë„ | ìƒíƒœ |
|---|------|----------|---------|--------|------|
| 1 | í…ìŠ¤íŠ¸ ì…ë ¥ ë¨¹í†µ | `app.js` | **ê¸´ê¸‰** | ì¤‘ê°„ | â¬œ ëŒ€ê¸° |
| 2 | ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì•Œë¦¼ | `app.js`, `auth-manager.js` | ë†’ìŒ | ë‚®ìŒ | â¬œ ëŒ€ê¸° |
| 3 | ë“œë¡œì‰ ë ˆì´ì–´ íˆ¬ëª…ë„ UI | `timeline.js`, `drawing-manager.js`, `main.css` | ì¤‘ê°„ | ì¤‘ê°„ | â¬œ ëŒ€ê¸° |
| 4 | íƒ€ì„ë¼ì¸ í•˜ì´ë¼ì´íŠ¸-ëŒ“ê¸€ë§ˆì»¤ ê²¹ì¹¨ | `main.css` | ë†’ìŒ | ë‚®ìŒ | â¬œ ëŒ€ê¸° |
| 5 | ì¤Œ ìŠ¤í¬ë¡¤ ê°œì„  (ê¸´ ì˜ìƒ) | `timeline.js` | ì¤‘ê°„ | ì¤‘ê°„ | â¬œ ëŒ€ê¸° |
| 6 | ì „ì²´í™”ë©´ ë‹¨ì¶•í‚¤ ë²„íŠ¼ ìˆ¨ê¹€ + Cí‚¤ ëŒ“ê¸€ | `main.css` | ë†’ìŒ | ë‚®ìŒ | âœ… ì™„ë£Œ |

---

## ë°°ê²½ ë° ëª©ì 

BAEFRAME 1ì°¨ ê³µì‹ ì‚¬ìš© í›„ íŒ€ì›ë“¤ë¡œë¶€í„° ë³´ê³ ëœ 6ê°œ ì´ìŠˆ (#97) ì¤‘ 5ê°œì— ëŒ€í•œ í•«í”½ìŠ¤.
ì‹¤ì‚¬ìš© í™˜ê²½ì—ì„œ ë°œê²¬ëœ ë¬¸ì œë“¤ì´ë¯€ë¡œ ë¹ ë¥¸ í•´ê²°ì´ í•„ìš”í•˜ë‹¤.

---

## Phase 1: í…ìŠ¤íŠ¸ ì…ë ¥ ë¨¹í†µ (ê¸´ê¸‰)

### ëª©í‘œ
ëŒ“ê¸€/ê²€ìƒ‰/ë¡œê·¸ì¸ ë“± í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œì—ì„œ ê°„í—ì ìœ¼ë¡œ ì…ë ¥ì´ ì•ˆ ë˜ëŠ” ë²„ê·¸ ìˆ˜ì •

### ì¦ìƒ
- í…ìŠ¤íŠ¸ ì…ë ¥ë€ì´ ê°€ë” ë¨¹í†µ (ì»¤ì„œ ê¹œë¹¡ì„ ìì²´ê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ)
- ESC, TAB í‚¤ë„ ì‘ë™í•˜ì§€ ì•ŠìŒ
- "ê°€ë”" ë°œìƒí•˜ë¯€ë¡œ íŠ¹ì • ìƒíƒœ ì „ì´ ì‹œ í¬ì»¤ìŠ¤ê°€ ì†ì‹¤ë˜ëŠ” ë¬¸ì œë¡œ ì¶”ì •

### ì›ì¸ ë¶„ì„

**ê·¼ë³¸ ì›ì¸: ì—¬ëŸ¬ UI ìƒíƒœ ì „ì´ ì‹œ í¬ì»¤ìŠ¤ ê´€ë¦¬ ë¶€ì¬**

#### ì›ì¸ 1: ëª¨ë‹¬/íŒì—… ê°„ í¬ì»¤ìŠ¤ ê°•íƒˆ (race condition)

**íŒŒì¼: `renderer/scripts/app.js`**

ë¡œê·¸ì¸ ëª¨ë‹¬ì—ì„œ `setTimeout`ìœ¼ë¡œ í¬ì»¤ìŠ¤ë¥¼ ì´ë™í•˜ëŠ” íŒ¨í„´ì´ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì„ ìœ ë°œí•  ìˆ˜ ìˆë‹¤:

```javascript
// app.js:5501 - setTimeoutìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™ â†’ íƒ€ì´ë° ì´ìŠˆ
function openLoginModal(targetName) {
  // ...
  loginModal?.classList.add('active');
  setTimeout(() => loginPasswordInput?.focus(), 100);  // â† 100ms ë”œë ˆì´
}
```

ìŠ¤ë ˆë“œ íŒì—…ë„ ì—´ë¦´ ë•Œ ê°•ì œ í¬ì»¤ìŠ¤ë¥¼ ì„¤ì •í•œë‹¤:

```javascript
// app.js:5993-5994 - ìŠ¤ë ˆë“œ íŒì—… ì—´ê¸° ì‹œ ê°•ì œ í¬ì»¤ìŠ¤
function openThreadPopup(markerId) {
  // ...
  threadOverlay.classList.add('open');
  threadEditor.focus();  // â† ê°•ì œ í¬ì»¤ìŠ¤ ì´ë™
}
```

**ë¬¸ì œ ì‹œë‚˜ë¦¬ì˜¤**: ëŒ“ê¸€ ì…ë ¥ ì¤‘ ë§ˆì»¤ ë”ë¸”í´ë¦­ â†’ `openThreadPopup()` í˜¸ì¶œ â†’ `threadEditor.focus()` ì‹¤í–‰ â†’ ê¸°ì¡´ ì…ë ¥ í•„ë“œ(`commentInput`) í¬ì»¤ìŠ¤ ìƒì‹¤ â†’ íŒì—… ë‹«ì€ í›„ í¬ì»¤ìŠ¤ê°€ ì–´ë””ì—ë„ ì—†ëŠ” ìƒíƒœ

#### ì›ì¸ 2: ëŒ“ê¸€ ëª¨ë“œ ìë™ í•´ì œë¡œ ì¸í•œ ì…ë ¥ ì°¨ë‹¨

```javascript
// app.js:3706-3710 - ë§ˆì»¤ ì˜ì—­ ë°– í´ë¦­ ì‹œ ëŒ“ê¸€ ëª¨ë“œ ê°•ì œ í•´ì œ
if (commentManager.pendingMarker && !clickedInsideMarker) {
  commentManager.setCommentMode(false);  // â† ëŒ“ê¸€ ëª¨ë“œ êº¼ì§
}
```

ëŒ“ê¸€ ëª¨ë“œê°€ í•´ì œë˜ë©´ `markerContainer.style.pointerEvents = 'none'`ì´ ë˜ë©´ì„œ, pending ìƒíƒœì˜ ë§ˆì»¤ ì…ë ¥ í…ìŠ¤íŠ¸ê°€ ìˆë˜ textareaì— ë” ì´ìƒ ë„ë‹¬í•  ìˆ˜ ì—†ê²Œ ëœë‹¤.

#### ì›ì¸ 3: ì „ì—­ keydown í•¸ë“¤ëŸ¬ì˜ ì˜ˆì™¸ ì²˜ë¦¬ëŠ” ë˜ì–´ìˆìœ¼ë‚˜, í¬ì»¤ìŠ¤ ë³µì› ë¡œì§ ë¶€ì¬

```javascript
// app.js:4827-4832 - handleKeydown
function handleKeydown(e) {
  if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT') return;
  if (e.target.isContentEditable) return;
  if (commentManager.pendingMarker) return;
  // ...
}
```

ì…ë ¥ í•„ë“œ ì˜ˆì™¸ ì²˜ë¦¬ëŠ” ì˜¬ë°”ë¥´ê²Œ ë˜ì–´ìˆì§€ë§Œ, ë¬¸ì œëŠ” **í¬ì»¤ìŠ¤ ìì²´ê°€ ì…ë ¥ í•„ë“œì— ì—†ì„ ë•Œ** ë°œìƒí•œë‹¤. ì¦‰, ì‚¬ìš©ìê°€ ì…ë ¥ í•„ë“œë¥¼ í´ë¦­í•´ë„ í¬ì»¤ìŠ¤ê°€ ê°€ì§€ ì•ŠëŠ” ê²½ìš°.

### ìˆ˜ì • ë°©ì•ˆ

#### 1-A. ëª¨ë‹¬ ì—´ê¸° ì‹œ ì´ì „ í¬ì»¤ìŠ¤ ì €ì¥ & ë³µì› ë©”ì»¤ë‹ˆì¦˜

```javascript
// app.jsì— ì¶”ê°€í•  í¬ì»¤ìŠ¤ ê´€ë¦¬ ìœ í‹¸ë¦¬í‹°
let _previousFocusElement = null;

function saveFocus() {
  _previousFocusElement = document.activeElement;
}

function restoreFocus() {
  if (_previousFocusElement && document.contains(_previousFocusElement)) {
    _previousFocusElement.focus();
    _previousFocusElement = null;
  }
}
```

ì ìš© ìœ„ì¹˜:
- `openThreadPopup()` ì‹œì‘ ë¶€ë¶„ì— `saveFocus()` ì¶”ê°€
- `closeThreadPopup()` ë§ˆì§€ë§‰ì— `restoreFocus()` ì¶”ê°€
- `openLoginModal()` ì‹œì‘ì— `saveFocus()` ì¶”ê°€
- `closeLoginModalFn()` ë§ˆì§€ë§‰ì— `restoreFocus()` ì¶”ê°€

#### 1-B. setTimeout í¬ì»¤ìŠ¤ ì œê±° â†’ ì§ì ‘ í¬ì»¤ìŠ¤ë¡œ ë³€ê²½

```javascript
// ë³€ê²½ ì „ (app.js:5501)
setTimeout(() => loginPasswordInput?.focus(), 100);

// ë³€ê²½ í›„ - CSS transition ì™„ë£Œ í›„ í¬ì»¤ìŠ¤
loginModal?.addEventListener('transitionend', function handler() {
  loginPasswordInput?.focus();
  loginModal?.removeEventListener('transitionend', handler);
}, { once: true });
```

#### 1-C. ëŒ“ê¸€ ëª¨ë“œ í•´ì œ ì‹œ pending textarea ë³´í˜¸

```javascript
// app.js:3706-3710 ìˆ˜ì •
// ë³€ê²½ ì „
if (commentManager.pendingMarker && !clickedInsideMarker) {
  commentManager.setCommentMode(false);
}

// ë³€ê²½ í›„ - pending ë§ˆì»¤ì˜ textareaì— í¬ì»¤ìŠ¤ê°€ ìˆìœ¼ë©´ í•´ì œí•˜ì§€ ì•ŠìŒ
if (commentManager.pendingMarker && !clickedInsideMarker) {
  const pendingTextarea = document.querySelector('.pending-marker textarea, .pending-marker input');
  if (pendingTextarea && document.activeElement === pendingTextarea) {
    // ì…ë ¥ ì¤‘ì´ë¯€ë¡œ ëª¨ë“œ í•´ì œí•˜ì§€ ì•ŠìŒ
    return;
  }
  commentManager.setCommentMode(false);
}
```

### ìˆ˜ì • íŒŒì¼

| íŒŒì¼ | ë¼ì¸ | ìˆ˜ì • ë‚´ìš© |
|------|------|----------|
| `renderer/scripts/app.js` | 5495-5502 | `openLoginModal()` - setTimeout ì œê±°, saveFocus ì¶”ê°€ |
| `renderer/scripts/app.js` | 5504-5506 | `closeLoginModalFn()` - restoreFocus ì¶”ê°€ |
| `renderer/scripts/app.js` | ~5924-5995 | `openThreadPopup()` - saveFocus ì¶”ê°€ |
| `renderer/scripts/app.js` | `closeThreadPopup()` | restoreFocus ì¶”ê°€ |
| `renderer/scripts/app.js` | 3706-3710 | pending ë§ˆì»¤ textarea í¬ì»¤ìŠ¤ ë³´í˜¸ |

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- **ë‚®ìŒ**: í¬ì»¤ìŠ¤ ì €ì¥/ë³µì›ì€ ê¸°ì¡´ ë™ì‘ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ
- **í™•ì¸ í•„ìš”**: `transitionend` ì´ë²¤íŠ¸ê°€ ëª¨ë‹¬ CSS transitionê³¼ ì •í™•íˆ ë§¤í•‘ë˜ëŠ”ì§€ í™•ì¸ í•„ìš”. ì•ˆì „í•˜ê²Œ `requestAnimationFrame` 2íšŒ ë˜í•‘ë„ ê³ ë ¤.

### í…ŒìŠ¤íŠ¸ ë°©ë²•
1. ëŒ“ê¸€ ì…ë ¥ ì¤‘ â†’ ë¹„ë””ì˜¤ ì˜ì—­ í´ë¦­ â†’ ë‹¤ì‹œ ëŒ“ê¸€ ì…ë ¥ â†’ ì…ë ¥ ë˜ëŠ”ì§€ í™•ì¸
2. ë§ˆì»¤ ë”ë¸”í´ë¦­ìœ¼ë¡œ ìŠ¤ë ˆë“œ ì—´ê¸° â†’ ë‹«ê¸° â†’ ëŒ“ê¸€ ì…ë ¥ ê°€ëŠ¥í•œì§€ í™•ì¸
3. ë¡œê·¸ì¸ ëª¨ë‹¬ ì—´ê¸° â†’ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ â†’ ESC â†’ ë‹¤ì‹œ ì—´ê¸° â†’ ì…ë ¥ ë˜ëŠ”ì§€ í™•ì¸
4. pending ë§ˆì»¤ í…ìŠ¤íŠ¸ ì…ë ¥ ì¤‘ â†’ ë§ˆì»¤ ë°– í´ë¦­ â†’ ì…ë ¥ì´ ì¤‘ë‹¨ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸

---

## Phase 2: íƒ€ì„ë¼ì¸ í•˜ì´ë¼ì´íŠ¸-ëŒ“ê¸€ë§ˆì»¤ ê²¹ì¹¨

### ëª©í‘œ
ëŒ“ê¸€ ë§ˆì»¤(ì„¸ë¡œì„  + ì•„ì´ì½˜)ê°€ í•˜ì´ë¼ì´íŠ¸ ë°” ì•„ë˜ì— ê°€ë ¤ì§€ì§€ ì•Šë„ë¡ ìˆ˜ì •

### ì›ì¸ ë¶„ì„

**í•µì‹¬ ë¬¸ì œ: `comment-marker-track`ì˜ `height: 100%`ê°€ `tracksContainer` ì „ì²´ë¥¼ ê´€í†µ**

í˜„ì¬ DOM êµ¬ì¡°:
```
tracksContainer (position: relative)
â”œâ”€â”€ highlight-track (24px, position: relative)
â”‚   â””â”€â”€ highlight-item (z-index: 10, height: 20px)
â”œâ”€â”€ comment-track (24px, position: relative)
â”‚   â””â”€â”€ comment-range-item (z-index: 10)
â”œâ”€â”€ track-row (36px)
â”‚   â””â”€â”€ video track clip
â””â”€â”€ comment-marker-track (ë™ì  ì¶”ê°€, position: absolute, top: 0, height: 100%, z-index: 10)
    â”œâ”€â”€ ::before (ğŸ’¬ ë˜ëŠ” âœ“ ì•„ì´ì½˜, top: -4px)
    â””â”€â”€ (ì„¸ë¡œì„  = background ìƒ‰ìƒ)
```

ë¬¸ì œ í¬ì¸íŠ¸:
1. `comment-marker-track`ì€ `position: absolute; top: 0; height: 100%`ë¡œ **tracksContainer ì „ì²´ ë†’ì´ë¥¼ ê´€í†µ**
2. `highlight-item`ê³¼ ê°™ì€ `z-index: 10`ì´ë¯€ë¡œ DOM ìˆœì„œì— ë”°ë¼ ê²¹ì¹¨ ë°œìƒ
3. í•˜ì´ë¼ì´íŠ¸ê°€ íˆ¬ëª… ë°°ê²½(`rgba(..., 0.3)`)ì´ë¼ ë§ˆì»¤ ì„¸ë¡œì„ ì´ ë¹„ì³ ë³´ì´ì§€ë§Œ, í•˜ì´ë¼ì´íŠ¸ ë°”ê°€ ë§ˆì»¤ ìœ„ì— ë Œë”ë§ë˜ì–´ ì•„ì´ì½˜(::before)ì„ ê°€ë¦¼

### ìˆ˜ì • ë°©ì•ˆ

**ë°©ì•ˆ: comment-marker-trackì˜ ë†’ì´ë¥¼ ëŒ“ê¸€ íŠ¸ë™ ì´í•˜ ì˜ì—­ìœ¼ë¡œ ì œí•œ**

ì‚¬ìš©ì ìš”êµ¬: "í•˜ì´ë¼ì´íŠ¸ ë°”ë¡œ ë°‘ ëŒ“ê¸€ ì¹¸ê¹Œì§€ë§Œ í•´ë‹¹ë˜ê²Œ í•´ì•¼í•´"

ì¦‰, comment-marker-trackì˜ ì„¸ë¡œì„ ì€ **ëŒ“ê¸€ íŠ¸ë™(comment-track) ì˜ì—­ë¶€í„° ì•„ë˜ë¡œë§Œ** í‘œì‹œë˜ì–´ì•¼ í•œë‹¤.

```css
/* ë³€ê²½ ì „ (main.css:4105-4115) */
.comment-marker-track {
  position: absolute;
  top: 0;           /* â† tracksContainer ìµœìƒë‹¨ë¶€í„° */
  width: 3px;
  height: 100%;     /* â† ì „ì²´ ë†’ì´ */
  z-index: 10;
}

/* ë³€ê²½ í›„ */
.comment-marker-track {
  position: absolute;
  top: 0;
  width: 3px;
  height: 100%;
  z-index: 10;
  /* í•˜ì´ë¼ì´íŠ¸ íŠ¸ë™(24px + 2px margin) ì˜ì—­ì€ ì œì™¸ */
  clip-path: inset(0 0 0 0);  /* í•„ìš” ì‹œ ì¡°ì • */
}
```

**ê·¸ëŸ¬ë‚˜ ë” ê·¼ë³¸ì ì¸ í•´ê²°ì±…ì€ JSì—ì„œ ë§ˆì»¤ì˜ top/heightë¥¼ ë™ì ìœ¼ë¡œ ê³„ì‚°í•˜ëŠ” ê²ƒ:**

`timeline.js`ì˜ `addCommentMarker()` í•¨ìˆ˜ (ë¼ì¸ 1438-1500) ë° `_addClusteredMarker()` í•¨ìˆ˜ì—ì„œ ë§ˆì»¤ ìƒì„± ì‹œ:

```javascript
// timeline.js:1438-1500 addCommentMarker()
// ë³€ê²½ ì „
marker.style.left = `${percent}%`;
// (top, height ëª…ì‹œ ì—†ìŒ â†’ CSS ê¸°ë³¸ê°’ top: 0, height: 100%)

// ë³€ê²½ í›„ - highlight-trackì´ ìˆìœ¼ë©´ ê·¸ ì•„ë˜ë¶€í„° ì‹œì‘
const highlightTrack = document.getElementById('highlightTrack');
const highlightVisible = highlightTrack && highlightTrack.style.display !== 'none';
const topOffset = highlightVisible ? highlightTrack.offsetHeight + 2 : 0;  // 24px + 2px margin

marker.style.top = `${topOffset}px`;
marker.style.height = `calc(100% - ${topOffset}px)`;
```

**ê·¸ë¦¬ê³  ::before (ì•„ì´ì½˜)ì˜ top ê°’ë„ ì¡°ì •:**

```css
/* ë³€ê²½ ì „ */
.comment-marker-track::before {
  top: -4px;  /* ë§ˆì»¤ ìƒë‹¨ ìœ„ë¡œ í‘œì‹œ */
}

/* ë³€ê²½ í›„ - ë§ˆì»¤ ì‹œì‘ì  ë°”ë¡œ ìœ„ì— ì•„ì´ì½˜ í‘œì‹œ */
.comment-marker-track::before {
  top: -4px;  /* ì´ ê°’ì€ ìœ ì§€ (ë§ˆì»¤ topì´ ì´ë¯¸ ì¡°ì •ë¨) */
}
```

**ì¶”ê°€ë¡œ í•˜ì´ë¼ì´íŠ¸ê°€ í† ê¸€ë  ë•Œ(í‘œì‹œ/ìˆ¨ê¹€) ë§ˆì»¤ ìœ„ì¹˜ë¥¼ ë‹¤ì‹œ ê³„ì‚°í•´ì•¼ í•¨:**

`renderHighlights()` í•¨ìˆ˜ (timeline.js:1756) í˜¸ì¶œ í›„ `_refreshCommentMarkers()` ê°™ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë§ˆì»¤ ìœ„ì¹˜ ì—…ë°ì´íŠ¸.

### ìˆ˜ì • íŒŒì¼

| íŒŒì¼ | ë¼ì¸ | ìˆ˜ì • ë‚´ìš© |
|------|------|----------|
| `renderer/scripts/modules/timeline.js` | 1438-1498 | `addCommentMarker()` - top/height ë™ì  ê³„ì‚° |
| `renderer/scripts/modules/timeline.js` | 1607-1691 | `_addClusteredMarker()` - ë™ì¼ ìˆ˜ì • |
| `renderer/scripts/modules/timeline.js` | 1756+ | `renderHighlights()` í›„ ë§ˆì»¤ ì¬ë°°ì¹˜ í˜¸ì¶œ |
| `renderer/styles/main.css` | 4105-4115 | `.comment-marker-track` ê¸°ë³¸ ìŠ¤íƒ€ì¼ (í•„ìš” ì‹œ) |

### ëŒ€ì•ˆ: CSS-only ì ‘ê·¼

ë§ˆì»¤ì˜ top/heightë¥¼ JSê°€ ì•„ë‹Œ CSS ë³€ìˆ˜ë¡œ ì œì–´:

```css
.tracks-container {
  --marker-top-offset: 0px;  /* JSì—ì„œ ë™ì  ì„¤ì • */
}

.comment-marker-track {
  top: var(--marker-top-offset);
  height: calc(100% - var(--marker-top-offset));
}
```

```javascript
// JSì—ì„œ í•˜ì´ë¼ì´íŠ¸ íŠ¸ë™ í‘œì‹œ/ìˆ¨ê¹€ ì‹œ
tracksContainer.style.setProperty(
  '--marker-top-offset',
  highlightVisible ? '26px' : '0px'  // 24px + 2px
);
```

ì´ ë°©ë²•ì´ **ê¸°ì¡´ ë§ˆì»¤ë¥¼ ëª¨ë‘ ì¬ìƒì„±í•  í•„ìš” ì—†ìœ¼ë¯€ë¡œ ë” íš¨ìœ¨ì **ì´ë‹¤.

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- **ë‚®ìŒ**: CSS ë³€ìˆ˜ ë°©ì‹ì€ ê¸°ì¡´ ì½”ë“œ ë³€ê²½ ìµœì†Œí™”
- **í™•ì¸ í•„ìš”**: comment-trackë„ í‘œì‹œ/ìˆ¨ê¹€ì— ë”°ë¼ offset ì¬ê³„ì‚° í•„ìš”

### í…ŒìŠ¤íŠ¸ ë°©ë²•
1. í•˜ì´ë¼ì´íŠ¸ ìˆëŠ” ì˜ìƒì—ì„œ ëŒ“ê¸€ ë§ˆì»¤ê°€ í•˜ì´ë¼ì´íŠ¸ ì•„ë˜ë¡œë§Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
2. í•˜ì´ë¼ì´íŠ¸ ì—†ëŠ” ì˜ìƒì—ì„œ ë§ˆì»¤ê°€ ì •ìƒ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
3. í•˜ì´ë¼ì´íŠ¸ ì¶”ê°€/ì‚­ì œ ì‹œ ë§ˆì»¤ ìœ„ì¹˜ê°€ ìë™ ì—…ë°ì´íŠ¸ë˜ëŠ”ì§€ í™•ì¸

---

## Phase 3: ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì•Œë¦¼

### ëª©í‘œ
ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸(`1234`)ë¡œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì—ê²Œ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì„ ê¶Œìœ í•˜ëŠ” ì•Œë¦¼ í‘œì‹œ

### í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„

ì´ë¯¸ êµ¬í˜„ëœ ê²ƒ:
- ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸: `1234` (`auth-manager.js:78`)
- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ UI ì™„ì„± (`index.html:1128-1154`)
- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í•¨ìˆ˜ ì™„ì„± (`auth-manager.js:172-199`)
- í† ìŠ¤íŠ¸ ì•Œë¦¼ ì‹œìŠ¤í…œ ì™„ì„± (`app.js:4752-4767`)

ë¯¸êµ¬í˜„:
- ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš© ì—¬ë¶€ ê°ì§€
- ë³€ê²½ ê¶Œìœ  ì•Œë¦¼

### ìˆ˜ì • ë°©ì•ˆ

#### 3-A. ë°©ë²• 1: ì…ë ¥ê°’ ì§ì ‘ ë¹„êµ (ê°„ë‹¨)

```javascript
// app.js:5518-5531 doLogin() í•¨ìˆ˜ ìˆ˜ì •
async function doLogin() {
  // ...ê¸°ì¡´ ì½”ë“œ...
  try {
    authManager.logout();
    const result = await authManager.login(_loginTargetName, password);
    userSettings.setUserName(_loginTargetName);
    updateUserName(_loginTargetName);

    // === ì¶”ê°€: ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ ê²½ê³  ===
    if (password === '1234') {
      showToast(
        'ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í–ˆìŠµë‹ˆë‹¤. ë³´ì•ˆì„ ìœ„í•´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•´ì£¼ì„¸ìš”.',
        'warning',
        5000,
        true  // force: ì„¤ì •ê³¼ ë¬´ê´€í•˜ê²Œ í•­ìƒ í‘œì‹œ
      );
    }
    // === ì¶”ê°€ ë ===

    showToast(`"${_loginTargetName}"(ìœ¼)ë¡œ ë¡œê·¸ì¸í–ˆìŠµë‹ˆë‹¤.`, 'success');
    closeLoginModalFn();
  }
}
```

#### 3-B. ë°©ë²• 2: í•´ì‹œ ë¹„êµ (ë” ì•ˆì „)

ë¹„ë°€ë²ˆí˜¸ í‰ë¬¸ì„ ë¹„êµí•˜ì§€ ì•Šê³ , `1234`ì˜ í•´ì‹œê°’ê³¼ ì €ì¥ëœ í•´ì‹œê°’ì„ ë¹„êµ:

```javascript
// auth-manager.jsì— ë©”ì„œë“œ ì¶”ê°€
async isDefaultPassword(name) {
  const user = this._findUser(name);
  if (!user) return false;

  const defaultHash = await this._hashPassword('1234');
  return user.passwordHash === defaultHash;
}
```

```javascript
// app.js doLogin() ìˆ˜ì •
const result = await authManager.login(_loginTargetName, password);
// ...

if (await authManager.isDefaultPassword(_loginTargetName)) {
  showToast(
    'ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤. ë³´ì•ˆì„ ìœ„í•´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•´ì£¼ì„¸ìš”.',
    'warning', 5000, true
  );
}
```

**ê¶Œì¥: ë°©ë²• 1 (ê°„ë‹¨í•˜ê³  ì¶©ë¶„)**. ì´ë¯¸ ë¡œê·¸ì¸ ì‹œì ì— í‰ë¬¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¡´ì¬í•˜ë¯€ë¡œ ì§ì ‘ ë¹„êµí•´ë„ ë³´ì•ˆìƒ ì°¨ì´ ì—†ìŒ.

### ìˆ˜ì • íŒŒì¼

| íŒŒì¼ | ë¼ì¸ | ìˆ˜ì • ë‚´ìš© |
|------|------|----------|
| `renderer/scripts/app.js` | 5518-5531 | `doLogin()` ë‚´ ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ ì²´í¬ ì¶”ê°€ |

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- **ë§¤ìš° ë‚®ìŒ**: í† ìŠ¤íŠ¸ ì•Œë¦¼ 1ì¤„ ì¶”ê°€

### í…ŒìŠ¤íŠ¸ ë°©ë²•
1. ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸(`1234`)ë¡œ ë¡œê·¸ì¸ â†’ ê²½ê³  í† ìŠ¤íŠ¸ í‘œì‹œ í™•ì¸
2. ë³€ê²½ëœ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ â†’ ê²½ê³  ì—†ì´ ì •ìƒ ë¡œê·¸ì¸ í™•ì¸
3. ë¹„ë³´í˜¸ ì‚¬ìš©ì(ë¹„ë°€ë²ˆí˜¸ ì—†ëŠ” ì‚¬ìš©ì)ë¡œ ë¡œê·¸ì¸ â†’ ê²½ê³  ì—†ìŒ í™•ì¸

---

## Phase 4: ë“œë¡œì‰ ë ˆì´ì–´ íˆ¬ëª…ë„ UI

### ëª©í‘œ
ë“œë¡œì‰ ë ˆì´ì–´ë³„ ë¶ˆíˆ¬ëª…ë„ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆëŠ” UI ì»¨íŠ¸ë¡¤ ì¶”ê°€

### í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„

ì´ë¯¸ êµ¬í˜„ëœ ê²ƒ:
- `DrawingLayer.opacity` ì†ì„± (`drawing-layer.js:95`) - ê¸°ë³¸ê°’ 1
- JSON ì§ë ¬í™”/ì—­ì§ë ¬í™”ì— opacity í¬í•¨ (`drawing-layer.js:324, 339`)
- ë Œë”ë§ ì‹œ `globalAlpha` ì ìš© (`drawing-manager.js:650-683`)
- ë¸ŒëŸ¬ì‹œ/íœ ë„êµ¬ì˜ ë¶ˆíˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” (`app.js:1385-1436`, `index.html:418-421`)

ë¯¸êµ¬í˜„:
- ë ˆì´ì–´ë³„ íˆ¬ëª…ë„ UI ì»¨íŠ¸ë¡¤ (ìŠ¬ë¼ì´ë”)
- `drawingManager.setLayerOpacity()` ë©”ì„œë“œ
- ë ˆì´ì–´ í—¤ë”ì— íˆ¬ëª…ë„ í‘œì‹œ/ì¡°ì ˆ UI

### ìˆ˜ì • ë°©ì•ˆ

#### 4-A. DrawingManagerì— setLayerOpacity ë©”ì„œë“œ ì¶”ê°€

```javascript
// drawing-manager.jsì— ì¶”ê°€
setLayerOpacity(layerId, opacity) {
  const layer = this.layers.find(l => l.id === layerId);
  if (!layer) return;

  layer.opacity = Math.max(0, Math.min(1, opacity));
  this.renderFrame(this.currentFrame);
  this._emit('layersChanged');
  log.debug('ë ˆì´ì–´ íˆ¬ëª…ë„ ë³€ê²½', { layerId, opacity: layer.opacity });
}
```

#### 4-B. ë ˆì´ì–´ í—¤ë” UIì— íˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” ì¶”ê°€

```javascript
// timeline.js:920-958 _renderLayerHeader() ìˆ˜ì •
// ê¸°ì¡´ HTMLì— íˆ¬ëª…ë„ ì»¨íŠ¸ë¡¤ ì¶”ê°€

header.innerHTML = `
  <div class="layer-color" style="background: ${layer.color}"></div>
  <span class="layer-visibility" data-action="visibility">
    ${layer.visible ? 'ğŸ‘' : 'ğŸ‘â€ğŸ—¨'}
  </span>
  <span class="layer-name">${layer.name}</span>
  <!-- íˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” ì¶”ê°€ -->
  <div class="layer-opacity-control">
    <input type="range" class="layer-opacity-slider"
           data-action="opacity"
           min="0" max="100"
           value="${Math.round(layer.opacity * 100)}"
           title="íˆ¬ëª…ë„ ${Math.round(layer.opacity * 100)}%">
  </div>
  <span class="layer-lock" data-action="lock">
    ${layer.locked ? 'ğŸ”’' : ''}
  </span>
`;
```

#### 4-C. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì—°ê²°

```javascript
// timeline.js _renderLayerHeader() ë‚´ë¶€
header.querySelector('[data-action="opacity"]')?.addEventListener('input', (e) => {
  e.stopPropagation();
  const opacityPercent = parseInt(e.target.value);
  e.target.title = `íˆ¬ëª…ë„ ${opacityPercent}%`;
  this._emit('layerOpacityChange', { layerId: layer.id, opacity: opacityPercent / 100 });
});
```

```javascript
// app.jsì—ì„œ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
timeline.addEventListener('layerOpacityChange', (e) => {
  const { layerId, opacity } = e.detail;
  drawingManager.setLayerOpacity(layerId, opacity);
});
```

#### 4-D. CSS ìŠ¤íƒ€ì¼

```css
/* main.cssì— ì¶”ê°€ */
.layer-opacity-control {
  display: flex;
  align-items: center;
  flex: 1;
  max-width: 60px;
  margin: 0 4px;
}

.layer-opacity-slider {
  width: 100%;
  height: 3px;
  cursor: pointer;
  accent-color: var(--accent-primary);
}
```

### ìˆ˜ì • íŒŒì¼

| íŒŒì¼ | ë¼ì¸ | ìˆ˜ì • ë‚´ìš© |
|------|------|----------|
| `renderer/scripts/modules/drawing-manager.js` | (ìƒˆ ë©”ì„œë“œ) | `setLayerOpacity()` ì¶”ê°€ |
| `renderer/scripts/modules/timeline.js` | 920-958 | `_renderLayerHeader()` íˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” ì¶”ê°€ |
| `renderer/scripts/app.js` | (ì´ë²¤íŠ¸ ì—°ê²°ë¶€) | `layerOpacityChange` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€ |
| `renderer/styles/main.css` | (ë ˆì´ì–´ í—¤ë” ìŠ¤íƒ€ì¼) | íˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” CSS ì¶”ê°€ |

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- **ë‚®ìŒ**: ê¸°ì¡´ ë°ì´í„° ëª¨ë¸ê³¼ ë Œë”ë§ ë¡œì§ì´ ì´ë¯¸ opacityë¥¼ ì§€ì›
- **í™•ì¸ í•„ìš”**: ë ˆì´ì–´ í—¤ë” ì˜ì—­ì´ ì¢ìœ¼ë¯€ë¡œ ìŠ¬ë¼ì´ë”ê°€ UIì— ì˜ ë§ëŠ”ì§€ í™•ì¸

### í…ŒìŠ¤íŠ¸ ë°©ë²•
1. ë“œë¡œì‰ ë ˆì´ì–´ ìƒì„± â†’ í—¤ë”ì— íˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
2. ìŠ¬ë¼ì´ë” ì¡°ì ˆ â†’ ìº”ë²„ìŠ¤ì— íˆ¬ëª…ë„ê°€ ì‹¤ì‹œê°„ ë°˜ì˜ë˜ëŠ”ì§€ í™•ì¸
3. íˆ¬ëª…ë„ ë³€ê²½ í›„ ì €ì¥ â†’ ì¬ë¡œë“œ â†’ íˆ¬ëª…ë„ ìœ ì§€ë˜ëŠ”ì§€ í™•ì¸

---

## Phase 5: ì¤Œ ìŠ¤í¬ë¡¤ ê°œì„  (ê¸´ ì˜ìƒ)

### ëª©í‘œ
ê¸´ ì˜ìƒì—ì„œ ê³¼ë„í•œ ìŠ¤í¬ë¡¤ ì—†ì´ ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ë¹ ë¥´ê²Œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ ê°œì„ 

### í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„

ì´ë¯¸ êµ¬í˜„ëœ ê²ƒ:
- ë™ì  maxZoom ê³„ì‚°: ì˜ìƒ í”„ë ˆì„ ìˆ˜ ê¸°ë°˜ (`timeline.js:431-466`)
  - `maxZoom = (targetFrameWidth * totalFrames * 100) / baseContainerWidth`
  - ìµœëŒ€ 50,000%ê¹Œì§€ ì§€ì›
- í”Œë ˆì´í—¤ë“œ ì¤‘ì‹¬ ì¤Œ (`timeline.js:118-137, 148-179`)
- ìë™ ìŠ¤í¬ë¡¤ (`timeline.js:492-537`)
- ì¤Œ ì¸ë””ì¼€ì´í„° í‘œì‹œ

í˜„ì¬ ì¤Œ ë™ì‘:
- **ê¸°ë³¸ íœ **: í”Œë ˆì´í—¤ë“œ ì¤‘ì‹¬ ì¤Œ ì¸/ì•„ì›ƒ (delta = Â±15)
- **Shift + íœ **: ë ˆì´ì–´ ìŠ¤í¬ë¡¤ (ìƒí•˜)
- **ì¤Œ ìŠ¬ë¼ì´ë”**: ì¢Œìš° ì¤Œ ì œì–´

### ë¬¸ì œì 

"ê¸´ ì˜ìƒì—ì„œ ìŠ¤í¬ë¡¤ì´ ê³¼ë„í•˜ê²Œ í•„ìš”"í•˜ë‹¤ëŠ” ê²ƒì€:
1. **ì¤Œ ì•„ì›ƒ(100%) ìƒíƒœì—ì„œ ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ì´ë™í•˜ê¸° ì–´ë ¤ì›€** - í”„ë ˆì„ì´ ë„ˆë¬´ ì‘ì•„ ì •ë°€ í´ë¦­ ë¶ˆê°€
2. **ì¤Œ ì¸ ìƒíƒœì—ì„œ ë¨¼ ìœ„ì¹˜ë¡œ ì´ë™ ì‹œ ìŠ¤í¬ë¡¤ ë§ì´ í•„ìš”** - ê°€ë¡œ ìŠ¤í¬ë¡¤ ì—†ì´ ì¤Œë§Œ ì§€ì›
3. **ì¤Œ ë‹¨ê³„(delta=15)ê°€ ê³ ì •ê°’** - ë†’ì€ ì¤Œ ë ˆë²¨ì—ì„œ ë³€í™”ê°€ ë¯¸ë¯¸

### ìˆ˜ì • ë°©ì•ˆ

#### 5-A. ê°€ë¡œ ìŠ¤í¬ë¡¤ ì§€ì› (Ctrl + íœ )

í˜„ì¬: ê¸°ë³¸ íœ  = ì¤Œ, Shift + íœ  = ì„¸ë¡œ ìŠ¤í¬ë¡¤
ì œì•ˆ: **Ctrl + íœ  = ê°€ë¡œ ìŠ¤í¬ë¡¤** ì¶”ê°€

```javascript
// timeline.js:148-179 íœ  ì´ë²¤íŠ¸ ìˆ˜ì •
this.timelineTracks?.addEventListener('wheel', (e) => {
  e.preventDefault();

  if (e.shiftKey) {
    // Shift + íœ : ì„¸ë¡œ ìŠ¤í¬ë¡¤ (ë ˆì´ì–´ íƒìƒ‰) - ê¸°ì¡´ ìœ ì§€
    this.timelineTracks.scrollTop += e.deltaY;
    if (this.layerHeaders) {
      this.layerHeaders.scrollTop = this.timelineTracks.scrollTop;
    }
  } else if (e.ctrlKey) {
    // === ì¶”ê°€: Ctrl + íœ  = ê°€ë¡œ ìŠ¤í¬ë¡¤ ===
    const scrollAmount = e.deltaY * 3;  // ìŠ¤í¬ë¡¤ ì†ë„ ë°°ìˆ˜
    this.timelineTracks.scrollLeft += scrollAmount;
  } else {
    // ê¸°ë³¸ íœ : ì¤Œ - ê¸°ì¡´ ìœ ì§€
    // ...
  }
}, { passive: false });
```

#### 5-B. ì¤Œ ë‹¨ê³„ë¥¼ ë¹„ìœ¨ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½

í˜„ì¬ `delta = Â±15` ê³ ì •ê°’ â†’ í˜„ì¬ ì¤Œ ë ˆë²¨ì˜ ë¹„ìœ¨(ì˜ˆ: 5%)ë¡œ ë³€ê²½:

```javascript
// ë³€ê²½ ì „
const delta = e.deltaY > 0 ? -15 : 15;

// ë³€ê²½ í›„ - í˜„ì¬ ì¤Œ ë ˆë²¨ì˜ 5% ë¹„ìœ¨
const zoomPercent = 0.05;  // 5%
const delta = e.deltaY > 0
  ? -(this.zoom * zoomPercent)
  : (this.zoom * zoomPercent);
const newZoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.zoom + delta));
```

ì´ë ‡ê²Œ í•˜ë©´ ì¤Œ ë ˆë²¨ì´ ë†’ì„ìˆ˜ë¡ ì¤Œ ë³€í™”ëŸ‰ë„ ì»¤ì ¸ì„œ, **ê³ ë°°ìœ¨ì—ì„œ ì¤Œ ì•„ì›ƒì´ ë§¤ìš° ë¹¨ë¼ì§„ë‹¤.**

#### 5-C. íƒ€ì„ë¼ì¸ í´ë¦­ìœ¼ë¡œ í•´ë‹¹ ì‹œê°„ ì´ë™ (ì´ë¯¸ êµ¬í˜„ ì—¬ë¶€ í™•ì¸ í•„ìš”)

ì¤Œ ì¸ ìƒíƒœì—ì„œ íƒ€ì„ë¼ì¸ ëˆˆê¸ˆì(ruler)ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ì‹œê°„ìœ¼ë¡œ ë°”ë¡œ ì´ë™í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ì¶”ê°€.

### ìˆ˜ì • íŒŒì¼

| íŒŒì¼ | ë¼ì¸ | ìˆ˜ì • ë‚´ìš© |
|------|------|----------|
| `renderer/scripts/modules/timeline.js` | 148-179 | íœ  ì´ë²¤íŠ¸ì— Ctrl+ê°€ë¡œìŠ¤í¬ë¡¤ ì¶”ê°€, ì¤Œ delta ë¹„ìœ¨ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½ |

### ì˜ˆìƒ ë¦¬ìŠ¤í¬
- **ë‚®ìŒ**: ê¸°ì¡´ ì¤Œ ë™ì‘ ìœ ì§€í•˜ë©´ì„œ ìƒˆ ë‹¨ì¶•í‚¤ë§Œ ì¶”ê°€
- **í™•ì¸ í•„ìš”**: ê¸°ì¡´ì— Ctrl+íœ ì´ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸ (í˜„ì¬ ë¯¸ì‚¬ìš©)

### í…ŒìŠ¤íŠ¸ ë°©ë²•
1. ê¸´ ì˜ìƒ(5ë¶„+) ë¡œë“œ â†’ ì¤Œ ì¸ ìƒíƒœì—ì„œ Ctrl+íœ ë¡œ ê°€ë¡œ ìŠ¤í¬ë¡¤ í™•ì¸
2. ë†’ì€ ì¤Œ ë ˆë²¨(1000%+)ì—ì„œ ì¤Œ ì•„ì›ƒ ì†ë„ê°€ ì ì ˆí•œì§€ í™•ì¸
3. ê¸°ì¡´ ì¤Œ ë™ì‘(ê¸°ë³¸ íœ )ì´ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸

---

## ë¦¬ìŠ¤í¬ ë° ìš°ë ¤ ì‚¬í•­

| ë¦¬ìŠ¤í¬ | ì‹¬ê°ë„ | í•´ë‹¹ Phase | ì™„í™” ë°©ì•ˆ |
|--------|--------|-----------|----------|
| í¬ì»¤ìŠ¤ ê´€ë¦¬ê°€ ë‹¤ë¥¸ ì…ë ¥ í•„ë“œì— ì˜í–¥ | ì¤‘ê°„ | Phase 1 | ëª¨ë“  ì…ë ¥ í•„ë“œì—ì„œ í¬ì»¤ìŠ¤ ì´ë™ í…ŒìŠ¤íŠ¸ |
| CSS ë³€ìˆ˜ ë°©ì‹ì´ IE/êµ¬í˜• ë¸Œë¼ìš°ì € ë¯¸ì§€ì› | ë‚®ìŒ | Phase 2 | Electron 28 ê¸°ë°˜ì´ë¯€ë¡œ ë¬¸ì œ ì—†ìŒ |
| ë ˆì´ì–´ í—¤ë” ê³µê°„ ë¶€ì¡±ìœ¼ë¡œ ìŠ¬ë¼ì´ë” ê²¹ì¹¨ | ë‚®ìŒ | Phase 4 | max-width ì œí•œ ë° hover ì‹œ í™•ì¥ ê³ ë ¤ |
| ë¹„ìœ¨ ê¸°ë°˜ ì¤Œì´ ë„ˆë¬´ ë¯¼ê°/ë‘”ê°í•  ìˆ˜ ìˆìŒ | ë‚®ìŒ | Phase 5 | zoomPercent ê°’ ì¡°ì • (3~10% ë²”ìœ„ í…ŒìŠ¤íŠ¸) |
| `.bframe` íŒŒì¼ í¬ë§· í˜¸í™˜ì„± | ë‚®ìŒ | Phase 4 | opacity í•„ë“œê°€ ì´ë¯¸ JSON ìŠ¤í‚¤ë§ˆì— í¬í•¨ë˜ì–´ ìˆìŒ |

---

## êµ¬í˜„ ìˆœì„œ (ê¶Œì¥)

```
Phase 2 (í•˜ì´ë¼ì´íŠ¸-ëŒ“ê¸€ë§ˆì»¤ ê²¹ì¹¨) â†’ CSS ë³€ê²½ë§Œìœ¼ë¡œ ë¹ ë¥´ê²Œ í•´ê²° ê°€ëŠ¥
    â†“
Phase 3 (ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ ì•Œë¦¼) â†’ 3~5ì¤„ ì¶”ê°€ë¡œ í•´ê²°
    â†“
Phase 1 (í…ìŠ¤íŠ¸ ì…ë ¥ ë¨¹í†µ) â†’ ê°€ì¥ ê¸´ê¸‰í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ ë§ì´ í•„ìš”
    â†“
Phase 5 (ì¤Œ ìŠ¤í¬ë¡¤ ê°œì„ ) â†’ ê¸°ì¡´ ë™ì‘ ìˆ˜ì •ì´ë¯€ë¡œ ì‹ ì¤‘í•˜ê²Œ
    â†“
Phase 4 (ë“œë¡œì‰ ë ˆì´ì–´ íˆ¬ëª…ë„) â†’ ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ì´ë¯€ë¡œ ê°€ì¥ ë§ˆì§€ë§‰
```

---

## ì „ì²´ ìˆ˜ì • ëŒ€ìƒ íŒŒì¼ ëª©ë¡

| íŒŒì¼ | Phase | ìˆ˜ì • ë²”ìœ„ |
|------|-------|----------|
| `renderer/scripts/app.js` | 1, 3 | í¬ì»¤ìŠ¤ ê´€ë¦¬, ë¹„ë°€ë²ˆí˜¸ ì²´í¬, ì´ë²¤íŠ¸ ì—°ê²° |
| `renderer/scripts/modules/timeline.js` | 2, 4, 5 | ë§ˆì»¤ ìœ„ì¹˜, ë ˆì´ì–´ í—¤ë”, ì¤Œ ë¡œì§ |
| `renderer/scripts/modules/drawing-manager.js` | 4 | setLayerOpacity ë©”ì„œë“œ |
| `renderer/styles/main.css` | 2, 4 | ë§ˆì»¤ ìŠ¤íƒ€ì¼, íˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” |

---

## ì°¸ê³ : ì£¼ìš” ì½”ë“œ ìœ„ì¹˜ í€µ ë ˆí¼ëŸ°ìŠ¤

### app.js
- `handleKeydown()`: 4827-4832 (ì „ì—­ í‚¤ë³´ë“œ í•¸ë“¤ëŸ¬)
- `showToast()`: 4752-4767 (í† ìŠ¤íŠ¸ ì•Œë¦¼)
- `openLoginModal()`: 5495-5502 (ë¡œê·¸ì¸ ëª¨ë‹¬)
- `doLogin()`: 5509-5541 (ë¡œê·¸ì¸ ì‹¤í–‰)
- `openThreadPopup()`: 5924-5995 (ìŠ¤ë ˆë“œ íŒì—…)
- `doChangePassword()`: 5598-5629 (ë¹„ë°€ë²ˆí˜¸ ë³€ê²½)
- ëŒ“ê¸€ ëª¨ë“œ í•´ì œ: 3706-3710
- ë„êµ¬ ë¶ˆíˆ¬ëª…ë„ UI: 1385-1436

### timeline.js
- ì¤Œ ìƒíƒœ: 26-35
- íœ  ì´ë²¤íŠ¸: 148-179
- `_calculateDynamicMaxZoom()`: 431-466
- `addCommentMarker()`: 1438-1500
- `_addClusteredMarker()`: 1607-1693
- `renderHighlights()`: 1756-1782
- `_createHighlightElement()`: 1789-1832
- `_renderLayerHeader()`: 920-958

### drawing-manager.js
- ë ˆì´ì–´ ë Œë”ë§ (globalAlpha ì ìš©): 650-683
- `_renderFrameSync()`: 669-683
- `setOpacity()`: 796

### auth-manager.js
- `registerUser()` (ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ `1234`): 66-96
- `login()`: 124-154
- `changePassword()`: 172-199
- `_hashPassword()`: 294-300

### main.css
- `.tracks-container`: 1657-1660
- `.highlight-track`: 1849-1856
- `.highlight-item`: 1859-1870
- `.comment-track`: 2106-2110
- `.comment-marker-track`: 4105-4115
- `.comment-marker-track.clustered`: 4153-4180
- í† ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼: 3695-3750
- `.shortcuts-toggle`: 3579-3596
- ì „ì²´í™”ë©´ ìŠ¤íƒ€ì¼: 6092-6261

---

## Phase 6: ì „ì²´í™”ë©´ ë‹¨ì¶•í‚¤ ë²„íŠ¼ ìˆ¨ê¹€ + Cí‚¤ ëŒ“ê¸€ ëª¨ë“œ (âœ… ì™„ë£Œ)

### ëª©í‘œ
1. ì „ì²´í™”ë©´ì—ì„œ ë‹¨ì¶•í‚¤ ì„¤ì • ë²„íŠ¼(ìš°í•˜ë‹¨ í‚¤ë³´ë“œ ì•„ì´ì½˜)ì„ ìˆ¨ê¸°ê¸°
2. ì „ì²´í™”ë©´ì—ì„œ Cí‚¤ë¡œ ëŒ“ê¸€/ë§ˆì»¤ ì¶”ê°€ ê¸°ëŠ¥ì´ ì‘ë™í•˜ë„ë¡ í•˜ê¸°

### ì›ì¸ ë¶„ì„

**ë‹¨ì¶•í‚¤ ë²„íŠ¼ ë¬¸ì œ:**
- `.shortcuts-toggle` (`index.html:897`)ì´ `position: fixed; bottom: 16px; right: 16px; z-index: 200`ìœ¼ë¡œ ê³ ì •
- ì „ì²´í™”ë©´ CSSì—ì„œ ìˆ¨ê¹€ ì²˜ë¦¬ê°€ ëˆ„ë½ë˜ì–´ ìˆì—ˆìŒ

**Cí‚¤ ëŒ“ê¸€ ëª¨ë“œ ë¬¸ì œ:**
- `handleKeydown`ì˜ `KeyC` ì¼€ì´ìŠ¤ (`app.js:4862-4867`)ì—ì„œ `toggleCommentMode()` í˜¸ì¶œì€ ì´ë¯¸ ì „ì²´í™”ë©´ì—ì„œë„ ì‘ë™
- í•˜ì§€ë§Œ `main.css:6200-6202`ì—ì„œ `.comment-markers-container`ê°€ `display: none !important`ë¡œ ìˆ¨ê²¨ì ¸ ìˆì–´ì„œ, ëŒ“ê¸€ ëª¨ë“œ ì§„ì…í•´ë„ ë§ˆì»¤ ë°°ì¹˜ ì˜ì—­ì´ ë³´ì´ì§€ ì•Šì•˜ìŒ

### ìˆ˜ì • ë‚´ìš© (ì™„ë£Œ)

**íŒŒì¼: `renderer/styles/main.css` (6200-6210)**

```css
/* ë³€ê²½ ì „ */
body.app-fullscreen .comment-markers-container {
  display: none !important;
}

/* ë³€ê²½ í›„ */
body.app-fullscreen .comment-markers-container {
  display: none !important;
}

body.app-fullscreen .video-wrapper.comment-mode .comment-markers-container {
  display: block !important;
}

body.app-fullscreen .shortcuts-toggle {
  display: none !important;
}
```

### ë™ì‘ ì›ë¦¬
- ì „ì²´í™”ë©´ ê¸°ë³¸ ìƒíƒœ: ë§ˆì»¤ ì»¨í…Œì´ë„ˆ ìˆ¨ê¹€ + ë‹¨ì¶•í‚¤ ë²„íŠ¼ ìˆ¨ê¹€
- Cí‚¤ ëˆ„ë¥´ë©´: `toggleCommentMode()` â†’ `videoWrapper.classList.add('comment-mode')` â†’ CSS ê·œì¹™ì— ì˜í•´ ë§ˆì»¤ ì»¨í…Œì´ë„ˆ í‘œì‹œ
- ë‹¤ì‹œ Cí‚¤ ë˜ëŠ” ESC: ëŒ“ê¸€ ëª¨ë“œ í•´ì œ â†’ `comment-mode` í´ë˜ìŠ¤ ì œê±° â†’ ë§ˆì»¤ ì»¨í…Œì´ë„ˆ ë‹¤ì‹œ ìˆ¨ê¹€

### í…ŒìŠ¤íŠ¸ ë°©ë²•
1. Fí‚¤ë¡œ ì „ì²´í™”ë©´ ì§„ì… â†’ ìš°í•˜ë‹¨ ë‹¨ì¶•í‚¤ ë²„íŠ¼ì´ ì‚¬ë¼ì§€ëŠ”ì§€ í™•ì¸
2. ì „ì²´í™”ë©´ì—ì„œ Cí‚¤ â†’ ëŒ“ê¸€ ëª¨ë“œ ì§„ì… ì•ˆë‚´ í‘œì‹œ í™•ì¸
3. ì „ì²´í™”ë©´ ëŒ“ê¸€ ëª¨ë“œì—ì„œ í™”ë©´ í´ë¦­ â†’ ë§ˆì»¤ ìœ„ì¹˜ ì§€ì • ê°€ëŠ¥í•œì§€ í™•ì¸
4. Fí‚¤ë¡œ ì „ì²´í™”ë©´ í•´ì œ â†’ ë‹¨ì¶•í‚¤ ë²„íŠ¼ ë‹¤ì‹œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
