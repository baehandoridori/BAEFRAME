<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob:;">
  <title>Î∞∞ÌîÑÎ†àÏûÑ - For Studio JBBJ - by BAE</title>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/playlist-panel.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <div class="logo">
        <div class="logo-icon">B</div>
        <span>baeframe</span>
      </div>
      <div class="file-info" id="fileInfo">
        <span class="file-icon">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/>
            <line x1="7" y1="2" x2="7" y2="22"/>
            <line x1="17" y1="2" x2="17" y2="22"/>
            <line x1="2" y1="12" x2="22" y2="12"/>
            <line x1="2" y1="7" x2="7" y2="7"/>
            <line x1="2" y1="17" x2="7" y2="17"/>
            <line x1="17" y1="7" x2="22" y2="7"/>
            <line x1="17" y1="17" x2="22" y2="17"/>
          </svg>
        </span>
        <span class="file-name file-name-clickable" id="fileName">ÌååÏùºÏùÑ Ïó¥Ïñ¥Ï£ºÏÑ∏Ïöî</span>
        <span class="file-path" id="filePath"></span>
        <!-- Version Dropdown -->
        <div class="version-dropdown" id="versionDropdown" style="display: none;">
          <button class="version-dropdown-trigger" id="versionDropdownTrigger">
            <span class="version-badge-icon">üì¶</span>
            <span class="version-badge-label" id="versionBadge">v1</span>
            <svg class="version-dropdown-arrow" viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <div class="version-dropdown-menu" id="versionDropdownMenu">
            <div class="version-dropdown-header">
              <span>Î≤ÑÏ†Ñ Î™©Î°ù</span>
              <div class="version-header-actions">
                <button class="version-header-btn" id="btnAddManualVersion" title="ÏàòÎèô Î≤ÑÏ†Ñ Ï∂îÍ∞Ä">
                  <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                  </svg>
                </button>
                <button class="version-header-btn" id="btnRescanVersions" title="Ìè¥Îçî Îã§Ïãú Ïä§Ï∫î">
                  <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                  </svg>
                </button>
                <span class="version-count" id="versionCount">0</span>
              </div>
            </div>
            <div class="version-list" id="versionList">
              <!-- Î≤ÑÏ†Ñ Î™©Î°ùÏù¥ Ïó¨Í∏∞Ïóê Î†åÎçîÎßÅÎê® -->
            </div>
            <div class="version-dropdown-divider"></div>
            <button class="version-dropdown-action version-compare-btn" id="btnCompareVersions">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="18" rx="1"/>
                <rect x="14" y="3" width="7" height="18" rx="1"/>
              </svg>
              Î≤ÑÏ†Ñ ÎπÑÍµê
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="header-right">
      <!-- ÌòëÏóÖÏûê ÌëúÏãú -->
      <div class="collaborators-indicator" id="collaboratorsIndicator" style="display: none;">
        <div class="collaborators-avatars" id="collaboratorsAvatars">
          <!-- ÌòëÏóÖÏûê ÏïÑÎ∞îÌÉÄÍ∞Ä Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê® -->
        </div>
        <div class="collaborators-info">
          <span class="collaborators-count" id="collaboratorsCount">0</span>
          <span class="collaborators-label">Î™Ö ÏûëÏóÖ Ï§ë</span>
        </div>
        <div class="sync-status" id="syncStatus" title="ÎèôÍ∏∞Ìôî ÏÉÅÌÉú">
          <svg class="sync-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M23 4v6h-6"></path>
            <path d="M1 20v-6h6"></path>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"></path>
            <path d="M20.49 15a9 9 0 0 1-14.85 3.36L1 14"></path>
          </svg>
        </div>
      </div>
      <button class="btn btn-secondary" id="btnOpenFolder" title="Ìè¥Îçî Ïó¥Í∏∞ (ÌÉêÏÉâÍ∏∞ÏóêÏÑú Î≥¥Í∏∞)" style="display: none;">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
        </svg>
        Ìè¥Îçî Ïó¥Í∏∞
      </button>
      <button class="btn btn-secondary" id="btnOpenOther" title="Îã§Î•∏ ÏòÅÏÉÅ ÌååÏùº Ïó¥Í∏∞" style="display: none;">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <polygon points="10 12 10 18 15 15 10 12"/>
        </svg>
        Îã§Î•∏ ÌååÏùº
      </button>
      <button class="btn btn-secondary" id="btnPlaylist" title="Ïû¨ÏÉùÎ™©Î°ù (P)">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="8" y1="6" x2="21" y2="6"/>
          <line x1="8" y1="12" x2="21" y2="12"/>
          <line x1="8" y1="18" x2="21" y2="18"/>
          <line x1="3" y1="6" x2="3.01" y2="6"/>
          <line x1="3" y1="12" x2="3.01" y2="12"/>
          <line x1="3" y1="18" x2="3.01" y2="18"/>
        </svg>
        Ïû¨ÏÉùÎ™©Î°ù
      </button>
      <button class="btn btn-secondary" id="btnSave">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
          <polyline points="17 21 17 13 7 13 7 21"/>
          <polyline points="7 3 7 8 15 8"/>
        </svg>
        Ï†ÄÏû•
      </button>
      <button class="btn btn-primary" id="btnCopyLink">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
          <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
        </svg>
        ÎßÅÌÅ¨ Î≥µÏÇ¨
      </button>
    </div>
  </header>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Playlist Sidebar (Ï¢åÏ∏°) -->
    <aside class="playlist-sidebar hidden" id="playlistSidebar">
      <div class="playlist-header">
        <div class="playlist-title-section">
          <svg class="playlist-icon" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="8" y1="6" x2="21" y2="6"/>
            <line x1="8" y1="12" x2="21" y2="12"/>
            <line x1="8" y1="18" x2="21" y2="18"/>
            <line x1="3" y1="6" x2="3.01" y2="6"/>
            <line x1="3" y1="12" x2="3.01" y2="12"/>
            <line x1="3" y1="18" x2="3.01" y2="18"/>
          </svg>
          <input type="text" class="playlist-name-input" id="playlistNameInput"
                 placeholder="Ïû¨ÏÉùÎ™©Î°ù Ïù¥Î¶Ñ" value="ÏÉà Ïû¨ÏÉùÎ™©Î°ù">
        </div>
        <div class="playlist-actions">
          <button class="playlist-btn" id="btnPlaylistAdd" title="ÌååÏùº Ï∂îÍ∞Ä">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
          <button class="playlist-btn" id="btnPlaylistCopyLink" title="ÎßÅÌÅ¨ Î≥µÏÇ¨">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
            </svg>
          </button>
          <button class="playlist-btn" id="btnPlaylistClose" title="Îã´Í∏∞">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="playlist-progress-bar">
        <div class="playlist-progress-fill" id="playlistProgressFill"></div>
        <span class="playlist-progress-text" id="playlistProgressText">0/0 ÏôÑÎ£å</span>
      </div>

      <div class="playlist-controls">
        <button class="playlist-nav-btn" id="btnPlaylistPrev" title="Ïù¥Ï†Ñ ÏòÅÏÉÅ (Ctrl+‚Üê)">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="19 20 9 12 19 4 19 20"/>
            <line x1="5" y1="19" x2="5" y2="5"/>
          </svg>
        </button>
        <span class="playlist-position" id="playlistPosition">- / -</span>
        <button class="playlist-nav-btn" id="btnPlaylistNext" title="Îã§Ïùå ÏòÅÏÉÅ (Ctrl+‚Üí)">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 4 15 12 5 20 5 4"/>
            <line x1="19" y1="5" x2="19" y2="19"/>
          </svg>
        </button>
        <label class="playlist-autoplay-toggle">
          <input type="checkbox" id="playlistAutoPlay">
          <span class="toggle-slider"></span>
          <span class="toggle-label">ÏûêÎèô Ïû¨ÏÉù</span>
        </label>
      </div>

      <div class="playlist-items" id="playlistItems">
        <!-- Ïû¨ÏÉùÎ™©Î°ù ÏïÑÏù¥ÌÖúÎì§Ïù¥ Ïó¨Í∏∞Ïóê Î†åÎçîÎßÅÎê® -->
      </div>

      <!-- ÌååÏùº Ï∂îÍ∞Ä ÏòÅÏó≠ (+ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú ÌëúÏãú) -->
      <div class="playlist-add-area" id="playlistAddArea">
        <div class="playlist-add-zone" id="playlistAddZone">
          <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          <span>ÌÅ¥Î¶≠ÌïòÍ±∞ÎÇò ÌååÏùºÏùÑ Ïó¨Í∏∞Ïóê ÎìúÎ°≠ÌïòÏÑ∏Ïöî</span>
        </div>
      </div>

      <!-- ÎìúÎûòÍ∑∏ Ïò§Î≤ÑÎ†àÏù¥ (Ïô∏Î∂Ä ÌååÏùº ÎìúÎûòÍ∑∏ Ïãú ÌëúÏãú) -->
      <div class="playlist-dropzone" id="playlistDropzone">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
        <span>ÌååÏùºÏùÑ Ïó¨Í∏∞Ïóê ÎìúÎ°≠ÌïòÏÑ∏Ïöî</span>
      </div>

      <div class="playlist-empty" id="playlistEmpty">
        <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <line x1="8" y1="6" x2="21" y2="6"/>
          <line x1="8" y1="12" x2="21" y2="12"/>
          <line x1="8" y1="18" x2="21" y2="18"/>
          <line x1="3" y1="6" x2="3.01" y2="6"/>
          <line x1="3" y1="12" x2="3.01" y2="12"/>
          <line x1="3" y1="18" x2="3.01" y2="18"/>
        </svg>
        <span>ÏòÅÏÉÅ ÌååÏùºÏùÑ ÎìúÎûòÍ∑∏ÌïòÏó¨<br>Ïû¨ÏÉùÎ™©Î°ùÏóê Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî</span>
      </div>
    </aside>

    <!-- Playlist Resizer -->
    <div class="playlist-resizer" id="playlistResizer"></div>

    <!-- Viewer Section -->
    <div class="viewer-section" id="viewerSection">
      <!-- Video Viewer -->
      <div class="viewer-container" id="viewerContainer">
        <div class="video-wrapper" id="videoWrapper">
          <!-- ÎìúÎ°≠ Ï°¥ -->
          <div class="drop-zone" id="dropZone">
            <div class="drop-zone-content">
              <img class="drop-zone-logo" src="assets/logo/baeframe.png" alt="BAEFRAME" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
              <div class="drop-zone-icon" style="display: none;">
                <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/>
                  <line x1="7" y1="2" x2="7" y2="22"/>
                  <line x1="17" y1="2" x2="17" y2="22"/>
                  <line x1="2" y1="12" x2="22" y2="12"/>
                  <line x1="2" y1="7" x2="7" y2="7"/>
                  <line x1="2" y1="17" x2="7" y2="17"/>
                  <line x1="17" y1="7" x2="22" y2="7"/>
                  <line x1="17" y1="17" x2="22" y2="17"/>
                </svg>
              </div>
              <div class="drop-zone-text">ÏòÅÏÉÅ ÌååÏùºÏùÑ Ïó¨Í∏∞Ïóê ÎìúÎ°≠ÌïòÏÑ∏Ïöî</div>
              <div class="drop-zone-hint">MOV, MP4, H.264/265 ÏßÄÏõê</div>
              <button class="btn btn-primary btn-large" id="btnOpenFile">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polygon points="5 3 19 12 5 21 5 3"/>
                </svg>
                ÏòÅÏÉÅ Ïó¥Í∏∞
              </button>
            </div>
          </div>

          <!-- Video Element (Ï∂îÌõÑ mpvÎ°ú ÎåÄÏ≤¥) -->
          <video id="videoPlayer" style="display: none;"></video>

          <!-- TODO: ÏòÅÏÉÅ Ïñ¥ÎãàÏñ∏ Ïä§ÌÇ® Ï∫îÎ≤ÑÏä§ - ÎπÑÎîîÏò§ Í∞ÄÎ¶º Î¨∏Ï†úÎ°ú ÏûÑÏãú ÎπÑÌôúÏÑ±Ìôî
          <canvas id="videoOnionSkinCanvas"></canvas>
          -->

          <!-- Video Loading Overlay -->
          <div class="video-loading-overlay" id="videoLoadingOverlay">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loadingText">Ïç∏ÎÑ§Ïùº ÏÉùÏÑ± Ï§ë...</div>
            <div class="loading-progress-bar">
              <div class="loading-progress-fill" id="loadingProgressFill"></div>
            </div>
          </div>

          <!-- Codec Unsupported Overlay -->
          <div class="codec-error-overlay" id="codecErrorOverlay">
            <div class="codec-error-icon">‚ö†Ô∏è</div>
            <div class="codec-error-title">ÏßÄÏõêÌïòÏßÄ ÏïäÎäî ÏΩîÎç±</div>
            <div class="codec-error-message">Ïù¥ ÏòÅÏÉÅÏùÄ ÏßÄÏõêÌïòÏßÄ ÏïäÎäî ÏΩîÎç±(MPEG-4 Part 2, HEVC Îì±)ÏûÖÎãàÎã§.</div>
            <div class="codec-error-hint">H.264 ÏΩîÎç±ÏúºÎ°ú Î≥ÄÌôò ÌõÑ Îã§Ïãú Ïó¥Ïñ¥Ï£ºÏÑ∏Ïöî.</div>
            <button class="btn btn-secondary" id="btnCodecErrorClose">Îã§Î•∏ ÏòÅÏÉÅ Ïó¥Í∏∞</button>
          </div>

          <!-- App Saving Overlay (Ï¢ÖÎ£å Ï†Ñ Ï†ÄÏû•) -->
          <div class="app-saving-overlay" id="appSavingOverlay">
            <div class="saving-spinner"></div>
            <div class="saving-text">Ï†ÄÏû• Ï§ë...</div>
            <div class="saving-hint">Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî</div>
          </div>

          <!-- Transcode Overlay (ÏΩîÎç± Î≥ÄÌôò) -->
          <div class="transcode-overlay" id="transcodeOverlay">
            <div class="transcode-icon">üîÑ</div>
            <div class="transcode-title">ÎπÑÎîîÏò§ Î≥ÄÌôò Ï§ë</div>
            <div class="transcode-subtitle" id="transcodeSubtitle">MPEG-4 ‚Üí H.264</div>
            <div class="transcode-progress-bar">
              <div class="transcode-progress-fill" id="transcodeProgressFill"></div>
            </div>
            <div class="transcode-info">
              <span id="transcodePercent">0%</span>
              <span id="transcodeStatus">Î≥ÄÌôò Ï§ÄÎπÑ Ï§ë...</span>
            </div>
            <button class="btn btn-secondary" id="btnCancelTranscode">Ï∑®ÏÜå</button>
          </div>

          <!-- Onion Skin Canvas (Í∑∏Î¶¨Í∏∞ Ï∫îÎ≤ÑÏä§ ÏïÑÎûòÏóê ÌëúÏãú) -->
          <canvas id="onionSkinCanvas" class="drawing-overlay onion-skin-layer"></canvas>

          <!-- Drawing Overlay Canvas -->
          <canvas id="drawingCanvas" class="drawing-overlay"></canvas>

          <!-- Comment Range Overlay (ÎπÑÎîîÏò§ ÌïòÎã® ÎåìÍ∏Ä Î≤îÏúÑ ÌëúÏãú) -->
          <div class="video-comment-range-overlay" id="videoCommentRangeOverlay">
            <!-- ÎåìÍ∏Ä Î≤îÏúÑ ÏöîÏÜåÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê® -->
          </div>

          <!-- Comment Range Overlay Controls -->
          <div class="video-comment-overlay-controls" id="videoCommentOverlayControls">
            <button class="overlay-control-btn" id="btnOverlayToggle" title="ÎåìÍ∏Ä Î≤îÏúÑ ÌëúÏãú ÌÜ†Í∏Ä">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
            </button>
            <button class="overlay-control-btn" id="btnOverlayPosition" title="ÏúÑÏπò Ï†ÑÌôò (ÏÉÅÎã®/ÌïòÎã®)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M7 10l5-5 5 5"/>
                <path d="M7 14l5 5 5-5"/>
              </svg>
            </button>
          </div>

          <!-- Video Zoom Controls -->
          <div class="video-zoom-controls" id="videoZoomControls">
            <button class="video-zoom-btn" id="btnVideoZoomOut" title="Ï∂ïÏÜå">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
            </button>
            <span class="video-zoom-display" id="videoZoomDisplay">100%</span>
            <button class="video-zoom-btn" id="btnVideoZoomIn" title="ÌôïÎåÄ">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
            </button>
            <button class="video-zoom-btn" id="btnVideoZoomReset" title="ÏõêÎ≥∏ ÌÅ¨Í∏∞ (100%)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>
            </button>
          </div>

          <!-- Zoom Indicator Overlay -->
          <div class="zoom-indicator-overlay" id="zoomIndicatorOverlay"></div>

          <!-- Drawing Tools Palette (Ïù¥Îèô/Ï†ëÍ∏∞ Í∞ÄÎä•) -->
          <div class="drawing-tools" id="drawingTools">
            <!-- ÎìúÎûòÍ∑∏ Ìï∏Îì§ Î∞è Ï†ëÍ∏∞ Î≤ÑÌäº -->
            <div class="drawing-tools-header" id="drawingToolsHeader">
              <span class="drag-handle" title="ÎìúÎûòÍ∑∏ÌïòÏó¨ Ïù¥Îèô">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><circle cx="9" cy="5" r="1.5"/><circle cx="15" cy="5" r="1.5"/><circle cx="9" cy="12" r="1.5"/><circle cx="15" cy="12" r="1.5"/><circle cx="9" cy="19" r="1.5"/><circle cx="15" cy="19" r="1.5"/></svg>
              </span>
              <span class="tools-title">Í∑∏Î¶¨Í∏∞ ÎèÑÍµ¨</span>
              <button class="collapse-btn" id="collapseToolsBtn" title="Ï†ëÍ∏∞/Ìé¥Í∏∞">
                <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
            </div>

            <!-- Ï†ëÌûàÎäî Ïª®ÌÖêÏ∏† ÏòÅÏó≠ -->
            <div class="drawing-tools-content" id="drawingToolsContent">
              <!-- ÎèÑÍµ¨ ÏÑ†ÌÉù -->
              <div class="tools-section">
                <div class="section-label">ÎèÑÍµ¨</div>
                <div class="tools-row">
                  <button class="tool-btn active" data-tool="pen" title="Ìéú (P)">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
                  </button>
                  <button class="tool-btn" data-tool="brush" title="Î∏åÎü¨Ïâ¨ (B)">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M9.06 11.9l8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08"/><path d="M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z"/></svg>
                  </button>
                  <button class="tool-btn" data-tool="eraser" title="ÏßÄÏö∞Í∞ú (E)">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"/><path d="M22 21H7"/><path d="m5 11 9 9"/></svg>
                  </button>
                  <button class="tool-btn" data-tool="line" title="ÏÑ† (L)">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="19" x2="19" y2="5"/></svg>
                  </button>
                  <button class="tool-btn" data-tool="arrow" title="ÌôîÏÇ¥Ìëú (A)">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                  </button>
                  <button class="tool-btn" data-tool="rect" title="ÏÇ¨Í∞ÅÌòï (R)">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/></svg>
                  </button>
                  <button class="tool-btn" data-tool="circle" title="Ïõê (O)">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>
                  </button>
                </div>
              </div>

              <!-- Î∏åÎü¨Ïâ¨ ÏÇ¨Ïù¥Ï¶à -->
              <div class="tools-section">
                <div class="section-label">ÌÅ¨Í∏∞ <span id="brushSizeValue">3px</span></div>
                <div class="size-slider-wrapper">
                  <input type="range" class="size-slider" id="brushSizeSlider" min="1" max="50" value="3">
                  <div class="size-preview" id="sizePreview"></div>
                </div>
              </div>

              <!-- Î∂àÌà¨Î™ÖÎèÑ (ÏßÄÏö∞Í∞ú Ï†úÏô∏) -->
              <div class="tools-section" id="opacitySection">
                <div class="section-label">Î∂àÌà¨Î™ÖÎèÑ <span id="brushOpacityValue">100%</span></div>
                <div class="size-slider-wrapper">
                  <input type="range" class="size-slider" id="brushOpacitySlider" min="10" max="100" value="100">
                </div>
              </div>

              <!-- Î∏åÎü¨Ïãú Ïô∏Í≥ΩÏÑ† -->
              <div class="tools-section" id="strokeSection">
                <div class="section-label">
                  Ïô∏Í≥ΩÏÑ†
                  <button class="stroke-toggle" id="strokeToggle" title="Ïô∏Í≥ΩÏÑ† ÌÜ†Í∏Ä">OFF</button>
                </div>
                <div class="stroke-controls" id="strokeControls">
                  <div class="stroke-row">
                    <span>ÎëêÍªò</span>
                    <input type="range" class="size-slider" id="strokeWidthSlider" min="1" max="10" value="3">
                    <span id="strokeWidthValue">3px</span>
                  </div>
                  <div class="stroke-row">
                    <span>ÏÉâÏÉÅ</span>
                    <div class="stroke-colors">
                      <button class="stroke-color-btn active" data-stroke-color="#ffffff" style="background: #ffffff; border: 1px solid #555" title="ÌïòÏñë"></button>
                      <button class="stroke-color-btn" data-stroke-color="#000000" style="background: #000000" title="Í≤ÄÏ†ï"></button>
                      <button class="stroke-color-btn" data-stroke-color="#ff4757" style="background: #ff4757" title="Îπ®Í∞ï"></button>
                      <button class="stroke-color-btn" data-stroke-color="#ffd000" style="background: #ffd000" title="ÎÖ∏Îûë"></button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ÏÉâÏÉÅ ÏÑ†ÌÉù -->
              <div class="tools-section">
                <div class="section-label">ÏÉâÏÉÅ</div>
                <div class="colors-row">
                  <button class="color-btn active" data-color="red" style="background: #ff4757" title="Îπ®Í∞ï"></button>
                  <button class="color-btn" data-color="yellow" style="background: #ffd000" title="ÎÖ∏Îûë"></button>
                  <button class="color-btn" data-color="green" style="background: #26de81" title="Ï¥àÎ°ù"></button>
                  <button class="color-btn" data-color="blue" style="background: #4a9eff" title="ÌååÎûë"></button>
                  <button class="color-btn" data-color="white" style="background: #ffffff; border: 1px solid #555" title="ÌïòÏñë"></button>
                  <button class="color-btn" data-color="black" style="background: #000000" title="Í≤ÄÏ†ï"></button>
                  <button class="color-btn" data-color="mint" style="background: #1abc9c" title="ÎØºÌä∏"></button>
                  <button class="color-btn" data-color="pink" style="background: #ff6b9d" title="ÌïëÌÅ¨"></button>
                </div>
              </div>

              <!-- Í∑∏Î¶¨Í∏∞ Ïñ¥ÎãàÏñ∏ Ïä§ÌÇ® -->
              <div class="tools-section">
                <div class="section-label">
                  Í∑∏Î¶¨Í∏∞ Ïñ¥ÎãàÏñ∏
                  <button class="onion-toggle" id="onionToggle" title="Ïñ¥ÎãàÏñ∏ Ïä§ÌÇ® ÌÜ†Í∏Ä">OFF</button>
                </div>
                <div class="onion-controls" id="onionControls">
                  <div class="onion-row">
                    <span>Ïù¥Ï†Ñ</span>
                    <input type="number" id="onionBefore" min="0" max="5" value="2">
                    <span>Ïû•</span>
                  </div>
                  <div class="onion-row">
                    <span>Ïù¥ÌõÑ</span>
                    <input type="number" id="onionAfter" min="0" max="5" value="1">
                    <span>Ïû•</span>
                  </div>
                  <div class="onion-row">
                    <span>Ìà¨Î™ÖÎèÑ</span>
                    <input type="range" id="onionOpacity" min="10" max="80" value="30">
                    <span id="onionOpacityValue">30%</span>
                  </div>
                </div>
              </div>

              <!-- TODO: ÏòÅÏÉÅ Ïñ¥ÎãàÏñ∏ Ïä§ÌÇ® - ÎπÑÎîîÏò§ Í∞ÄÎ¶º Î¨∏Ï†úÎ°ú ÏûÑÏãú ÎπÑÌôúÏÑ±Ìôî
              <div class="tools-section">
                <div class="section-label">
                  ÏòÅÏÉÅ Ïñ¥ÎãàÏñ∏
                  <button class="onion-toggle" id="videoOnionToggle" title="ÏòÅÏÉÅ Ïñ¥ÎãàÏñ∏ Ïä§ÌÇ® ÌÜ†Í∏Ä">OFF</button>
                </div>
                <div class="onion-controls" id="videoOnionControls">
                  <div class="onion-row">
                    <span>Ïù¥Ï†Ñ</span>
                    <input type="number" id="videoOnionBefore" min="0" max="5" value="1">
                    <span>Ïû•</span>
                  </div>
                  <div class="onion-row">
                    <span>Ïù¥ÌõÑ</span>
                    <input type="number" id="videoOnionAfter" min="0" max="5" value="1">
                    <span>Ïû•</span>
                  </div>
                  <div class="onion-row">
                    <span>Ìà¨Î™ÖÎèÑ</span>
                    <input type="range" id="videoOnionOpacity" min="10" max="60" value="30">
                    <span id="videoOnionOpacityValue">30%</span>
                  </div>
                </div>
              </div>
              -->

              <!-- Ïï°ÏÖò Î≤ÑÌäº -->
              <div class="tools-section tools-actions">
                <button class="tool-btn" id="btnUndo" title="Ïã§Ìñâ Ï∑®ÏÜå (Ctrl+Z)">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>
                </button>
                <button class="tool-btn" id="btnClearDrawing" title="Ï†ÑÏ≤¥ ÏßÄÏö∞Í∏∞">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Resizer (Horizontal) -->
      <div class="resizer resizer-h" id="viewerResizer"></div>

      <!-- Playback Controls -->
      <div class="controls-bar">
        <!-- Ï†ÑÏ≤¥ÌôîÎ©¥ ÏãúÌÅ¨Î∞î -->
        <div class="fullscreen-seekbar" id="fullscreenSeekbar">
          <div class="seekbar-track">
            <div class="seekbar-progress" id="seekbarProgress"></div>
            <div class="seekbar-handle" id="seekbarHandle"></div>
          </div>
        </div>
        <div class="playback-controls">
          <button class="control-btn" id="btnFirst" title="Ï≤òÏùåÏúºÎ°ú (Home)">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><polygon points="19 20 9 12 19 4 19 20"/><line x1="5" y1="19" x2="5" y2="5"/></svg>
          </button>
          <button class="control-btn" id="btnPrevFrame" title="Ïù¥Ï†Ñ ÌîÑÎ†àÏûÑ (‚Üê)">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 19 2 12 11 5 11 19"/><polygon points="22 19 13 12 22 5 22 19"/></svg>
          </button>
          <button class="control-btn play-btn" id="btnPlay" title="Ïû¨ÏÉù/ÏùºÏãúÏ†ïÏßÄ (Space)">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" stroke="none" id="playIcon"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          </button>
          <button class="control-btn" id="btnNextFrame" title="Îã§Ïùå ÌîÑÎ†àÏûÑ (‚Üí)">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 19 22 12 13 5 13 19"/><polygon points="2 19 11 12 2 5 2 19"/></svg>
          </button>
          <button class="control-btn" id="btnLast" title="ÎÅùÏúºÎ°ú (End)">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
          </button>
        </div>

        <div class="playback-info-stack">
          <div class="timecode" id="timecode">
            <span class="timecode-current" id="timecodeCurrent">00:00:00:00</span>
            <span class="timecode-separator">/</span>
            <span class="timecode-total" id="timecodeTotal">00:00:00:00</span>
          </div>
          <div class="frame-indicator" id="frameIndicator">24fps ¬∑ Frame 0 / 0</div>
        </div>

        <div class="controls-spacer"></div>

        <div class="action-controls">
          <button class="action-btn" id="btnDrawMode">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
            Í∑∏Î¶¨Í∏∞
            <span class="shortcut-hint" id="btnDrawModeHint">D</span>
          </button>
          <div class="comment-nav-group">
            <button class="nav-arrow-btn" id="btnPrevComment" title="Ïù¥Ï†Ñ ÎåìÍ∏Ä (Shift+‚Üê)">
              <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
            </button>
            <button class="action-btn" id="btnAddComment">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
              ÎåìÍ∏Ä
              <span class="shortcut-hint" id="btnAddCommentHint">C</span>
            </button>
            <button class="nav-arrow-btn" id="btnNextComment" title="Îã§Ïùå ÎåìÍ∏Ä (Shift+‚Üí)">
              <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
            </button>
          </div>
        </div>

        <!-- TODO: ÏòÅÏÉÅ Ïñ¥ÎãàÏñ∏ Ïä§ÌÇ® ÌÜ†Í∏Ä - ÎπÑÎîîÏò§ Í∞ÄÎ¶º Î¨∏Ï†úÎ°ú ÏûÑÏãú ÎπÑÌôúÏÑ±Ìôî
        <button class="control-toggle-btn" id="btnVideoOnionSkin" title="ÏòÅÏÉÅ Ïñ¥ÎãàÏñ∏ Ïä§ÌÇ® (Îã®Ï∂ïÌÇ§ ÏóÜÏùå)">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10" opacity="0.3"/>
            <circle cx="12" cy="12" r="7" opacity="0.5"/>
            <circle cx="12" cy="12" r="4"/>
          </svg>
        </button>
        -->

        <!-- Íµ¨Í∞Ñ Î∞òÎ≥µ Ïª®Ìä∏Î°§ -->
        <div class="loop-controls" id="loopControls">
          <button class="loop-btn" id="btnSetInPoint" title="ÏãúÏûëÏ†ê ÏÑ§Ï†ï (I)">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 19l-7-7 7-7"/><line x1="4" y1="12" x2="20" y2="12"/></svg>
            <span class="loop-timecode" id="inPointDisplay">--:--</span>
          </button>
          <button class="loop-btn loop-toggle" id="btnLoopToggle" title="Íµ¨Í∞Ñ Î∞òÎ≥µ (L)">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg>
          </button>
          <button class="loop-btn" id="btnSetOutPoint" title="Ï¢ÖÎ£åÏ†ê ÏÑ§Ï†ï (O)">
            <span class="loop-timecode" id="outPointDisplay">--:--</span>
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 5l7 7-7 7"/><line x1="20" y1="12" x2="4" y2="12"/></svg>
          </button>
          <button class="loop-btn loop-clear" id="btnClearLoop" title="Íµ¨Í∞Ñ Ï¥àÍ∏∞Ìôî">
            <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>

        <!-- ÌïòÏù¥ÎùºÏù¥Ìä∏ Ïª®Ìä∏Î°§ -->
        <div class="highlight-controls" id="highlightControls">
          <button class="nav-arrow-btn" id="btnPrevHighlight" title="Ïù¥Ï†Ñ ÌïòÏù¥ÎùºÏù¥Ìä∏ (Alt+‚Üê)">
            <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
          </button>
          <button class="highlight-btn" id="btnAddHighlight" title="ÌïòÏù¥ÎùºÏù¥Ìä∏ Ï∂îÍ∞Ä (H)">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="10" width="18" height="4" rx="1" fill="currentColor" opacity="0.3"/>
              <line x1="12" y1="6" x2="12" y2="18"/>
              <line x1="6" y1="12" x2="18" y2="12"/>
            </svg>
            <span>ÌïòÏù¥ÎùºÏù¥Ìä∏</span>
          </button>
          <button class="nav-arrow-btn" id="btnNextHighlight" title="Îã§Ïùå ÌïòÏù¥ÎùºÏù¥Ìä∏ (Alt+‚Üí)">
            <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
          </button>
        </div>
      </div>

      <!-- Timeline -->
      <div class="timeline-section" id="timelineSection">
        <div class="timeline-toolbar">
          <div class="timeline-toolbar-left">
            <div class="timeline-title">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--accent-primary)"><rect x="2" y="7" width="20" height="10" rx="2"/><line x1="6" y1="7" x2="6" y2="17"/><line x1="10" y1="7" x2="10" y2="17"/><line x1="14" y1="7" x2="14" y2="17"/><line x1="18" y1="7" x2="18" y2="17"/></svg>
              ÌÉÄÏûÑÎùºÏù∏
            </div>
          </div>
          <div class="timeline-toolbar-right">
            <div class="zoom-buttons">
              <button class="zoom-btn" id="btnTimelineZoomOut" title="Ï∂ïÏÜå">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
              </button>
              <button class="zoom-btn" id="btnTimelineZoomReset" title="ÏõêÎ≥∏ (100%)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>
              </button>
              <button class="zoom-btn" id="btnTimelineZoomIn" title="ÌôïÎåÄ">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
              </button>
            </div>
            <div class="zoom-control">
              <span class="zoom-label">Ï§å</span>
              <input type="range" class="zoom-slider" id="zoomSlider" min="1" max="100" value="50">
              <span class="zoom-display" id="zoomDisplay">100%</span>
            </div>
          </div>
        </div>

        <div class="timeline-main">
          <!-- Layer Headers -->
          <div class="layer-headers" id="layerHeaders">
            <div class="layer-header-ruler">
              <!-- Î†àÏù¥Ïñ¥ Ï∂îÍ∞Ä/ÏÇ≠Ï†ú Î≤ÑÌäº -->
              <button class="layer-action-btn" id="btnAddLayer" title="Î†àÏù¥Ïñ¥ Ï∂îÍ∞Ä">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              </button>
              <button class="layer-action-btn" id="btnDeleteLayer" title="Î†àÏù¥Ïñ¥ ÏÇ≠Ï†ú">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/></svg>
              </button>
            </div>
            <!-- ÌïòÏù¥ÎùºÏù¥Ìä∏ Ìä∏Îûô Ìó§Îçî (ÌïòÏù¥ÎùºÏù¥Ìä∏ Ìä∏ÎûôÍ≥º Ïó∞Îèô) -->
            <div class="highlight-layer-header" id="highlightLayerHeader" style="display: none;">
              <span class="highlight-label">ÌïòÏù¥ÎùºÏù¥Ìä∏</span>
            </div>
            <!-- ÎåìÍ∏Ä Ìä∏Îûô Ìó§Îçî (ÎåìÍ∏Ä Ìä∏ÎûôÍ≥º Ïó∞Îèô) -->
            <div class="comment-layer-header" id="commentLayerHeader" style="display: none;">
              <span class="comment-label">ÎåìÍ∏Ä</span>
            </div>
            <div class="layer-header" data-layer="video">
              <div class="layer-color" style="background: #3a3a3a"></div>
              <span class="layer-visibility">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
              </span>
              <span class="layer-name">
                <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 4px"><rect x="2" y="2" width="20" height="20" rx="2.18"/><line x1="7" y1="2" x2="7" y2="22"/><line x1="17" y1="2" x2="17" y2="22"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                Video
              </span>
              <span class="layer-lock">
                <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
              </span>
            </div>
          </div>

          <!-- Timeline Tracks -->
          <div class="timeline-tracks" id="timelineTracks">
            <!-- ÌîåÎ†àÏù¥Ìó§Îìú (Ìï∏Îì§ + ÎùºÏù∏Ïù¥ Í∞ôÏùÄ Î∂ÄÎ™®ÏóêÏÑú Í∞ôÏùÄ left Í∞í ÏÇ¨Ïö©) -->
            <div class="playhead-handle" id="playheadHandle"></div>
            <div class="playhead-line" id="playheadLine"></div>

            <div class="timeline-ruler" id="timelineRuler"></div>
            <div class="tracks-container" id="tracksContainer">
              <!-- ÌïòÏù¥ÎùºÏù¥Ìä∏ Ìä∏Îûô (ÌïòÏù¥ÎùºÏù¥Ìä∏Í∞Ä ÏûàÏùÑ ÎïåÎßå ÌëúÏãú) -->
              <div class="highlight-track" id="highlightTrack" style="display: none;">
                <!-- ÌïòÏù¥ÎùºÏù¥Ìä∏ ÏöîÏÜåÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê® -->
              </div>
              <!-- ÎåìÍ∏Ä Ìä∏Îûô (ÎåìÍ∏ÄÏù¥ ÏûàÏùÑ ÎïåÎßå ÌëúÏãú) -->
              <div class="comment-track" id="commentTrack" style="display: none;">
                <!-- ÎåìÍ∏Ä Î≤îÏúÑ ÏöîÏÜåÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê® -->
              </div>
              <div class="track-row">
                <div class="track-clip video" id="videoTrackClip">ÏòÅÏÉÅÏùÑ Î°úÎìúÌïòÏÑ∏Ïöî</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Resizer (Vertical) -->
    <div class="resizer" id="panelResizer">
      <!-- Comment Panel Toggle Button -->
      <button class="comment-panel-toggle" id="commentPanelToggle" title="ÎåìÍ∏Ä Ìå®ÎÑê ÌÜ†Í∏Ä">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
      </button>
    </div>

    <!-- Comment Panel -->
    <div class="comment-panel" id="commentPanel">
      <div class="panel-header">
        <div class="panel-title">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--accent-primary)"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
          ÎåìÍ∏Ä
          <span class="comment-count" id="commentCount">0</span>
        </div>
        <div class="panel-actions">
          <button class="panel-btn" id="btnCompactView" title="Ïª¥Ìå©Ìä∏ Î∑∞ ÌÜ†Í∏Ä">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
          </button>
          <button class="panel-btn" id="btnCommentSettings" title="ÏÑ§Ï†ï">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
          </button>
          <!-- ÏÑ§Ï†ï ÎìúÎ°≠Îã§Ïö¥ -->
          <div class="comment-settings-dropdown" id="commentSettingsDropdown">
            <div class="settings-dropdown-header">ÎåìÍ∏Ä ÏÑ§Ï†ï</div>
            <div class="settings-dropdown-item">
              <label class="settings-toggle">
                <input type="checkbox" id="toggleCommentThumbnails" checked>
                <span class="toggle-slider"></span>
                <span class="toggle-label">Ïç∏ÎÑ§Ïùº ÌëúÏãú</span>
              </label>
            </div>
            <div class="settings-dropdown-item thumbnail-scale-item" id="thumbnailScaleItem">
              <label class="settings-label">Ïç∏ÎÑ§Ïùº ÌÅ¨Í∏∞</label>
              <div class="settings-scale-control">
                <input type="range" id="thumbnailScaleSlider" min="35" max="200" value="35" step="5">
                <span class="scale-value" id="thumbnailScaleValue">35%</span>
              </div>
            </div>
            <div class="settings-dropdown-divider"></div>
            <div class="settings-dropdown-item">
              <label class="settings-toggle">
                <input type="checkbox" id="toggleToastNotifications" checked>
                <span class="toggle-slider"></span>
                <span class="toggle-label">ÏïåÎ¶º ÌëúÏãú</span>
              </label>
            </div>
            <div class="settings-dropdown-divider"></div>
            <button class="settings-dropdown-btn" id="btnChangeUserName">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              Ïù¥Î¶Ñ Î≥ÄÍ≤Ω
            </button>
            <button class="settings-dropdown-btn" id="btnChangePassword" style="display: none;">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
              ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω
            </button>
            <button class="settings-dropdown-btn" id="btnChangeTheme" style="display: none;">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
              ÌÖåÎßà Î≥ÄÍ≤Ω
            </button>
            <div class="settings-dropdown-divider"></div>
            <button class="settings-dropdown-btn" id="btnShortcutSettings">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M6 12h12M6 16h8"/></svg>
              Îã®Ï∂ïÌÇ§ ÏÑ§Ï†ï
            </button>
            <div class="settings-dropdown-divider"></div>
            <button class="settings-dropdown-btn" id="btnCacheSettings">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
              Ï∫êÏãú ÏÑ§Ï†ï
            </button>
          </div>
        </div>
      </div>

      <!-- ÌîºÎìúÎ∞± ÏôÑÎ£åÏú® ÌîÑÎ°úÍ∑∏Î†àÏä§ Î∞î -->
      <div class="feedback-progress" id="feedbackProgress">
        <div class="feedback-progress-header">
          <span class="feedback-progress-label">ÌîºÎìúÎ∞± ÏßÑÌñâÎ•†</span>
          <span class="feedback-progress-value" id="feedbackProgressValue">0%</span>
        </div>
        <div class="feedback-progress-bar">
          <div class="feedback-progress-fill" id="feedbackProgressFill" style="width: 0%"></div>
        </div>
      </div>

      <div class="filter-bar">
        <button class="filter-chip active" data-filter="all">Ï†ÑÏ≤¥</button>
        <button class="filter-chip" data-filter="unresolved">ÎØ∏Ìï¥Í≤∞</button>
        <button class="filter-chip" data-filter="resolved">Ìï¥Í≤∞Îê®</button>
        <button
          type="button"
          class="comment-search-toggle"
          id="commentSearchToggle"
          aria-label="ÎåìÍ∏Ä Í≤ÄÏÉâ Ïó¥Í∏∞"
          title="ÎåìÍ∏Ä Í≤ÄÏÉâ Ïó¥Í∏∞"
          aria-expanded="false"
          aria-controls="commentSearchPanel"
        >
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="7"></circle>
            <line x1="20" y1="20" x2="16.65" y2="16.65"></line>
          </svg>
        </button>
      </div>

      <div class="comment-search-bar" id="commentSearchBar">
        <div class="comment-search-panel" id="commentSearchPanel">
          <div class="comment-search-input-wrap" id="commentSearchInputWrap">
            <input
              type="text"
              id="commentSearchInput"
              class="comment-search-input"
              placeholder=""
              autocomplete="off"
              aria-label="ÎåìÍ∏Ä Í≤ÄÏÉâ"
            >
            <span class="comment-search-placeholder" id="commentSearchPlaceholder" aria-hidden="true">
              <span class="comment-search-placeholder-prefix">ÏòàÏãú: </span>
              <span class="comment-search-placeholder-word" id="commentSearchPlaceholderWord">ÎèÑÏú§Ïù¥</span>
            </span>
            <button
              type="button"
              class="comment-search-clear"
              id="commentSearchClear"
              title="Í≤ÄÏÉâ ÏßÄÏö∞Í∏∞"
              aria-label="Í≤ÄÏÉâ ÏßÄÏö∞Í∏∞"
            >&times;</button>
          </div>
        </div>
      </div>

      <div class="comments-list" id="commentsList">
        <!-- ÎåìÍ∏ÄÎì§Ïù¥ Ïó¨Í∏∞Ïóê Î†åÎçîÎßÅÎê® -->
        <div class="empty-comments">
          <div class="empty-comments-icon">
            <svg viewBox="0 0 24 24" width="40" height="40" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
          </div>
          <div class="empty-comments-text">ÏïÑÏßÅ ÎåìÍ∏ÄÏù¥ ÏóÜÏäµÎãàÎã§</div>
          <div class="empty-comments-hint">ÏòÅÏÉÅÏùÑ Ïû¨ÏÉùÌïòÍ≥† CÌÇ§Î•º ÎàåÎü¨ ÎåìÍ∏ÄÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî</div>
        </div>
      </div>

      <!-- New Comment Input -->
      <div class="new-comment">
        <div class="comment-image-preview" id="commentImagePreview" style="display: none;">
          <img id="commentPreviewImg" src="" alt="Ï≤®Î∂Ä Ïù¥ÎØ∏ÏßÄ">
          <button class="comment-image-remove" id="commentImageRemove" title="Ïù¥ÎØ∏ÏßÄ Ï†úÍ±∞">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>
        <div class="comment-input-wrapper">
          <textarea class="comment-input" id="commentInput" rows="2" placeholder="ÎåìÍ∏ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî... (Ctrl+VÎ°ú Ïù¥ÎØ∏ÏßÄ Î∂ôÏó¨ÎÑ£Í∏∞)"></textarea>
          <div class="comment-input-actions">
            <button class="comment-image-btn" id="btnCommentImage" title="Ïù¥ÎØ∏ÏßÄ Ï≤®Î∂Ä">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
            </button>
            <button class="comment-submit" id="btnSubmitComment">Ï†ÑÏÜ°</button>
          </div>
        </div>
        <div class="input-hint">Tip: Í∑∏Î¶¨Í∏∞ ÎèÑÍµ¨(D)Î°ú ÎßàÌÇπÏùÑ Ï∂îÍ∞ÄÌïòÍ±∞ÎÇò Ïù¥ÎØ∏ÏßÄÎ•º Î∂ôÏó¨ÎÑ£Ïñ¥ ÌîºÎìúÎ∞±ÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî</div>
      </div>
    </div>
  </div>

  <!-- Shortcuts Toggle Button -->
  <button class="shortcuts-toggle" id="shortcutsToggle" title="Îã®Ï∂ïÌÇ§ (?)">
    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><line x1="6" y1="8" x2="6.01" y2="8"/><line x1="10" y1="8" x2="10.01" y2="8"/><line x1="14" y1="8" x2="14.01" y2="8"/><line x1="18" y1="8" x2="18.01" y2="8"/><line x1="6" y1="12" x2="6.01" y2="12"/><line x1="10" y1="12" x2="10.01" y2="12"/><line x1="14" y1="12" x2="14.01" y2="12"/><line x1="18" y1="12" x2="18.01" y2="12"/><line x1="6" y1="16" x2="18" y2="16"/></svg>
  </button>

  <!-- ÎßàÏª§ ÏÉâÏÉÅ ÌåùÏóÖ Î©îÎâ¥ -->
  <div class="marker-popup" id="markerPopup" style="display: none;">
    <div class="marker-popup-content">
      <div class="marker-popup-row">
        <label class="marker-popup-label">ÏÉâÏÉÅ</label>
        <div class="marker-color-picker" id="markerColorPicker">
          <button class="marker-color-btn" data-color="default" title="Í∏∞Î≥∏" style="background: #4a9eff;"></button>
          <button class="marker-color-btn" data-color="yellow" title="ÎÖ∏Îûë" style="background: #ffdd59;"></button>
          <button class="marker-color-btn" data-color="red" title="Îπ®Í∞ï" style="background: #ff5555;"></button>
          <button class="marker-color-btn" data-color="pink" title="ÌïëÌÅ¨" style="background: #ff6b9d;"></button>
          <button class="marker-color-btn" data-color="green" title="Ï¥àÎ°ù" style="background: #2ed573;"></button>
          <button class="marker-color-btn" data-color="gray" title="ÌöåÏÉâ" style="background: #a0a0a0;"></button>
          <button class="marker-color-btn" data-color="white" title="Ìù∞ÏÉâ" style="background: #ffffff;"></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Î†àÏù¥Ïñ¥ ÏÑ§Ï†ï ÎßêÌíçÏÑ† ÌåùÏóÖ -->
  <div class="layer-settings-popup" id="layerSettingsPopup" style="display: none;">
    <div class="layer-settings-arrow"></div>
    <div class="layer-settings-content">
      <div class="layer-settings-row">
        <label class="layer-settings-label">Ïù¥Î¶Ñ</label>
        <input type="text" class="layer-settings-input" id="layerNameInput" placeholder="Î†àÏù¥Ïñ¥ Ïù¥Î¶Ñ...">
      </div>
      <div class="layer-settings-row">
        <label class="layer-settings-label">ÏÉâÏÉÅ</label>
        <div class="layer-color-picker" id="layerColorPicker">
          <button class="layer-color-btn" data-color="#ff4757" title="Îπ®Í∞ï" style="background: #ff4757;"></button>
          <button class="layer-color-btn" data-color="#ffa502" title="Ï£ºÌô©" style="background: #ffa502;"></button>
          <button class="layer-color-btn" data-color="#ffdd59" title="ÎÖ∏Îûë" style="background: #ffdd59;"></button>
          <button class="layer-color-btn" data-color="#2ed573" title="Ï¥àÎ°ù" style="background: #2ed573;"></button>
          <button class="layer-color-btn" data-color="#1e90ff" title="ÌååÎûë" style="background: #1e90ff;"></button>
          <button class="layer-color-btn" data-color="#a55eea" title="Î≥¥Îùº" style="background: #a55eea;"></button>
        </div>
      </div>
      <div class="layer-settings-row">
        <label class="layer-settings-label">Î∂àÌà¨Î™ÖÎèÑ</label>
        <div class="layer-settings-opacity">
          <input type="range" class="layer-settings-opacity-slider" id="layerOpacitySlider"
                 min="0" max="100" value="100">
          <span class="layer-settings-opacity-value" id="layerOpacityValue">100%</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ÌïòÏù¥ÎùºÏù¥Ìä∏ ÌåùÏóÖ Î©îÎâ¥ -->
  <div class="highlight-popup" id="highlightPopup" style="display: none;">
    <div class="highlight-popup-content">
      <div class="highlight-popup-row">
        <label class="highlight-popup-label">Ï£ºÏÑù</label>
        <input type="text" class="highlight-popup-input" id="highlightNoteInput" placeholder="Î©îÎ™® ÏûÖÎ†•...">
      </div>
      <div class="highlight-popup-row">
        <label class="highlight-popup-label">ÏÉâÏÉÅ</label>
        <div class="highlight-color-picker" id="highlightColorPicker">
          <button class="highlight-color-btn" data-color="red" title="Îπ®Í∞ï" style="background: #ff5555;"></button>
          <button class="highlight-color-btn" data-color="yellow" title="ÎÖ∏Îûë" style="background: #ffdd59;"></button>
          <button class="highlight-color-btn" data-color="green" title="Ï¥àÎ°ù" style="background: #2ed573;"></button>
          <button class="highlight-color-btn" data-color="blue" title="ÌååÎûë" style="background: #4a9eff;"></button>
          <button class="highlight-color-btn" data-color="gray" title="ÌöåÏÉâ" style="background: #a0a0a0;"></button>
          <button class="highlight-color-btn" data-color="white" title="Ìù∞ÏÉâ" style="background: #ffffff;"></button>
        </div>
      </div>
      <div class="highlight-popup-actions">
        <button class="highlight-popup-copy" id="highlightCopyBtn">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          Î≥µÏÇ¨
        </button>
        <button class="highlight-popup-delete" id="highlightDeleteBtn">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
          ÏÇ≠Ï†ú
        </button>
      </div>
    </div>
  </div>

  <!-- Shortcuts Menu -->
  <div class="shortcuts-menu" id="shortcutsMenu">
    <div class="shortcuts-menu-header">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><line x1="6" y1="8" x2="6.01" y2="8"/><line x1="10" y1="8" x2="10.01" y2="8"/><line x1="14" y1="8" x2="14.01" y2="8"/><line x1="18" y1="8" x2="18.01" y2="8"/><line x1="6" y1="12" x2="6.01" y2="12"/><line x1="10" y1="12" x2="10.01" y2="12"/><line x1="14" y1="12" x2="14.01" y2="12"/><line x1="18" y1="12" x2="18.01" y2="12"/><line x1="6" y1="16" x2="18" y2="16"/></svg>
      ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§
    </div>
    <div class="shortcuts-menu-content">
      <!-- Ïû¨ÏÉù -->
      <div class="shortcut-category">
        <div class="shortcut-category-title">Ïû¨ÏÉù</div>
        <div class="shortcut-row">
          <span class="shortcut-label">Ïû¨ÏÉù/Ï†ïÏßÄ</span>
          <div class="shortcut-keys"><span class="shortcut-key">Space</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Ïù¥Ï†Ñ/Îã§Ïùå ÌîÑÎ†àÏûÑ</span>
          <div class="shortcut-keys"><span class="shortcut-key">‚Üê</span><span class="shortcut-key">‚Üí</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">10ÌîÑÎ†àÏûÑ Ïù¥Îèô</span>
          <div class="shortcut-keys"><span class="shortcut-key">Shift</span><span class="shortcut-key">‚Üê‚Üí</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">1Ï¥à Ïù¥Îèô</span>
          <div class="shortcut-keys"><span class="shortcut-key">Ctrl</span><span class="shortcut-key">‚Üê‚Üí</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Ï≤òÏùå/ÎÅùÏúºÎ°ú</span>
          <div class="shortcut-keys"><span class="shortcut-key">Home</span><span class="shortcut-key">End</span></div>
        </div>
      </div>

      <!-- ÎèÑÍµ¨ -->
      <div class="shortcut-category">
        <div class="shortcut-category-title">ÎèÑÍµ¨</div>
        <div class="shortcut-row">
          <span class="shortcut-label">Í∑∏Î¶¨Í∏∞ Î™®Îìú / Î∏åÎü¨Ïãú</span>
          <div class="shortcut-keys"><span class="shortcut-key" id="hintDrawMode">B</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">ÏßÄÏö∞Í∞ú Î™®Îìú</span>
          <div class="shortcut-keys"><span class="shortcut-key">E</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">ÎåìÍ∏Ä Ï∂îÍ∞Ä</span>
          <div class="shortcut-keys"><span class="shortcut-key" id="hintCommentMode">C</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">ÏÑ†ÌÉù Î™®Îìú (Í∑∏Î¶¨Í∏∞ Ï¢ÖÎ£å)</span>
          <div class="shortcut-keys"><span class="shortcut-key">V</span></div>
        </div>
      </div>

      <!-- ÌÇ§ÌîÑÎ†àÏûÑ -->
      <div class="shortcut-category">
        <div class="shortcut-category-title">ÌÇ§ÌîÑÎ†àÏûÑ (Í∑∏Î¶¨Í∏∞ Î™®Îìú)</div>
        <div class="shortcut-row">
          <span class="shortcut-label">Ïù¥Ï†Ñ/Îã§Ïùå ÌÇ§ÌîÑÎ†àÏûÑ</span>
          <div class="shortcut-keys"><span class="shortcut-key">A</span><span class="shortcut-key">D</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Ïñ¥ÎãàÏñ∏ Ïä§ÌÇ® ÌÜ†Í∏Ä</span>
          <div class="shortcut-keys"><span class="shortcut-key">1</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Îπà ÌÇ§ÌîÑÎ†àÏûÑ ÏÇΩÏûÖ</span>
          <div class="shortcut-keys"><span class="shortcut-key">2</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">ÌîÑÎ†àÏûÑ ÏÇΩÏûÖ (ÌôÄÎìú)</span>
          <div class="shortcut-keys"><span class="shortcut-key">3</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">ÌîÑÎ†àÏûÑ ÏÇ≠Ï†ú</span>
          <div class="shortcut-keys"><span class="shortcut-key">4</span></div>
        </div>
      </div>

      <!-- Ìé∏Ïßë -->
      <div class="shortcut-category">
        <div class="shortcut-category-title">Ìé∏Ïßë</div>
        <div class="shortcut-row">
          <span class="shortcut-label">Ïã§Ìñâ Ï∑®ÏÜå</span>
          <div class="shortcut-keys"><span class="shortcut-key">Ctrl</span><span class="shortcut-key">Z</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Îã§Ïãú Ïã§Ìñâ</span>
          <div class="shortcut-keys"><span class="shortcut-key">Ctrl</span><span class="shortcut-key">Y</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">ÌÇ§ÌîÑÎ†àÏûÑ Î≥µÏ†ú Ï∂îÍ∞Ä</span>
          <div class="shortcut-keys"><span class="shortcut-key">F6</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Îπà ÌÇ§ÌîÑÎ†àÏûÑ Ï∂îÍ∞Ä</span>
          <div class="shortcut-keys"><span class="shortcut-key">F7</span></div>
        </div>
      </div>
      <div class="shortcut-category">
        <div class="shortcut-category-title">Î≥¥Í∏∞ (Í≥µÌÜµ)</div>
        <div class="shortcut-row">
          <span class="shortcut-label">ÌÉÄÏûÑÎùºÏù∏ Ï§å</span>
          <div class="shortcut-keys"><span class="shortcut-key">Ctrl</span><span class="shortcut-key">+/-</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Îã®Ï∂ïÌÇ§ Î©îÎâ¥</span>
          <div class="shortcut-keys"><span class="shortcut-key">?</span></div>
        </div>
      </div>
      <div class="shortcut-category">
        <div class="shortcut-category-title">Íµ¨Í∞Ñ Î∞òÎ≥µ (Í≥µÌÜµ)</div>
        <div class="shortcut-row">
          <span class="shortcut-label">ÏãúÏûëÏ†ê ÏÑ§Ï†ï</span>
          <div class="shortcut-keys"><span class="shortcut-key">I</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Ï¢ÖÎ£åÏ†ê ÏÑ§Ï†ï</span>
          <div class="shortcut-keys"><span class="shortcut-key">O</span></div>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Íµ¨Í∞Ñ Î∞òÎ≥µ ÌÜ†Í∏Ä</span>
          <div class="shortcut-keys"><span class="shortcut-key">L</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Scripts -->
  <!-- User Settings Modal -->
  <div class="modal-overlay" id="userSettingsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ÏÇ¨Ïö©Ïûê ÏÑ§Ï†ï</h3>
        <button class="modal-close" id="closeUserSettings">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="userNameInput">ÌëúÏãú Ïù¥Î¶Ñ</label>
          <input type="text" id="userNameInput" placeholder="ÎåìÍ∏ÄÏóê ÌëúÏãúÎê† Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" maxlength="20">
          <p class="form-hint">Ïù¥ Ïù¥Î¶ÑÏùÄ ÎåìÍ∏Ä ÏûëÏÑ± Ïãú ÌëúÏãúÎê©ÎãàÎã§.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancelUserSettings">Ï∑®ÏÜå</button>
        <button class="btn-primary" id="saveUserSettings">Ï†ÄÏû•</button>
      </div>
    </div>
  </div>

  <!-- Î°úÍ∑∏Ïù∏ Modal -->
  <div class="modal-overlay" id="loginModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="loginModalTitle">Î°úÍ∑∏Ïù∏</h3>
        <button class="modal-close" id="closeLogin">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>ÏÇ¨Ïö©Ïûê</label>
          <div class="login-user-display" id="loginUserDisplay"></div>
        </div>
        <div class="form-group">
          <label for="loginPasswordInput">ÎπÑÎ∞ÄÎ≤àÌò∏</label>
          <input type="password" id="loginPasswordInput" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" class="auth-input">
          <p class="form-hint" id="loginHint">Îì±Î°ùÎêú ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§. ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancelLogin">Ï∑®ÏÜå</button>
        <button class="btn-primary" id="confirmLogin">Î°úÍ∑∏Ïù∏</button>
      </div>
    </div>
  </div>

  <!-- ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω Modal -->
  <div class="modal-overlay" id="changePasswordModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω</h3>
        <button class="modal-close" id="closeChangePassword">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="currentPasswordInput">ÌòÑÏû¨ ÎπÑÎ∞ÄÎ≤àÌò∏</label>
          <input type="password" id="currentPasswordInput" placeholder="ÌòÑÏû¨ ÎπÑÎ∞ÄÎ≤àÌò∏" class="auth-input">
        </div>
        <div class="form-group">
          <label for="newPasswordInput">ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏</label>
          <input type="password" id="newPasswordInput" placeholder="ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏" class="auth-input">
        </div>
        <div class="form-group">
          <label for="confirmPasswordInput">ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏</label>
          <input type="password" id="confirmPasswordInput" placeholder="ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏" class="auth-input">
          <p class="password-match-hint" id="passwordMatchHint"></p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancelChangePassword">Ï∑®ÏÜå</button>
        <button class="btn-primary" id="confirmChangePassword">Î≥ÄÍ≤Ω</button>
      </div>
    </div>
  </div>

  <!-- ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨ Modal -->
  <div class="modal-overlay" id="userManagementModal">
    <div class="modal-content modal-lg">
      <div class="modal-header">
        <h3>ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨</h3>
        <button class="modal-close" id="closeUserManagement">&times;</button>
      </div>
      <div class="modal-body">
        <div class="registered-users-list" id="registeredUsersList">
          <!-- ÎèôÏ†ÅÏúºÎ°ú Ï±ÑÏõåÏßê -->
        </div>
        <div class="register-user-section">
          <button class="btn-primary btn-full" id="btnOpenRegisterUser">+ ÏÉà ÏÇ¨Ïö©Ïûê Îì±Î°ù</button>
          <p class="form-hint" style="margin-top: 8px; text-align: center;">Ï¥àÍ∏∞ ÎπÑÎ∞ÄÎ≤àÌò∏: 1234</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="closeUserManagementBtn">Îã´Í∏∞</button>
      </div>
    </div>
  </div>

  <!-- ÏÉà ÏÇ¨Ïö©Ïûê Îì±Î°ù Modal -->
  <div class="modal-overlay" id="registerUserModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ÏÉà ÏÇ¨Ïö©Ïûê Îì±Î°ù</h3>
        <button class="modal-close" id="closeRegisterUser">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="registerNameInput">Ïù¥Î¶Ñ</label>
          <input type="text" id="registerNameInput" placeholder="ÏÇ¨Ïö©Ïûê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" maxlength="20">
        </div>
        <div class="form-group">
          <label>ÌÖåÎßà</label>
          <div class="theme-selector" id="registerThemeSelector">
            <button class="theme-btn active" data-theme="" title="Í∏∞Î≥∏ (ÎÖ∏Îûë)"><span class="theme-dot" style="background: #ffd000;"></span> Í∏∞Î≥∏</button>
            <button class="theme-btn" data-theme="red" title="Îπ®Í∞ï"><span class="theme-dot" style="background: #ff5555;"></span> Îπ®Í∞ï</button>
            <button class="theme-btn" data-theme="blue" title="ÌååÎûë"><span class="theme-dot" style="background: #4a9eff;"></span> ÌååÎûë</button>
            <button class="theme-btn" data-theme="pink" title="ÌïëÌÅ¨"><span class="theme-dot" style="background: #ffaaaa;"></span> ÌïëÌÅ¨</button>
            <button class="theme-btn" data-theme="green" title="Ï¥àÎ°ù"><span class="theme-dot" style="background: #2ed573;"></span> Ï¥àÎ°ù</button>
          </div>
        </div>
        <p class="form-hint">Ï¥àÍ∏∞ ÎπÑÎ∞ÄÎ≤àÌò∏: 1234</p>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancelRegisterUser">Ï∑®ÏÜå</button>
        <button class="btn-primary" id="confirmRegisterUser">Îì±Î°ù</button>
      </div>
    </div>
  </div>

  <!-- ÌÖåÎßà Î≥ÄÍ≤Ω Modal -->
  <div class="modal-overlay" id="changeThemeModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ÌÖåÎßà Î≥ÄÍ≤Ω</h3>
        <button class="modal-close" id="closeChangeTheme">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>ÌÖåÎßà ÏÑ†ÌÉù</label>
          <div class="theme-selector" id="changeThemeSelector">
            <button class="theme-btn" data-theme="" title="Í∏∞Î≥∏ (ÎÖ∏Îûë)"><span class="theme-dot" style="background: #ffd000;"></span> Í∏∞Î≥∏</button>
            <button class="theme-btn" data-theme="red" title="Îπ®Í∞ï"><span class="theme-dot" style="background: #ff5555;"></span> Îπ®Í∞ï</button>
            <button class="theme-btn" data-theme="blue" title="ÌååÎûë"><span class="theme-dot" style="background: #4a9eff;"></span> ÌååÎûë</button>
            <button class="theme-btn" data-theme="pink" title="ÌïëÌÅ¨"><span class="theme-dot" style="background: #ffaaaa;"></span> ÌïëÌÅ¨</button>
            <button class="theme-btn" data-theme="green" title="Ï¥àÎ°ù"><span class="theme-dot" style="background: #2ed573;"></span> Ï¥àÎ°ù</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="cancelChangeTheme">Ï∑®ÏÜå</button>
        <button class="btn-primary" id="confirmChangeTheme">Ï†ÄÏû•</button>
      </div>
    </div>
  </div>

  <!-- Îã®Ï∂ïÌÇ§ ÏÑ§Ï†ï Modal -->
  <div class="modal-overlay" id="shortcutSettingsModal">
    <div class="modal-content modal-lg">
      <div class="modal-header">
        <h3>Îã®Ï∂ïÌÇ§ ÏÑ§Ï†ï</h3>
        <button class="modal-close" id="closeShortcutSettings">&times;</button>
      </div>
      <div class="modal-body">
        <!-- ÌîÑÎ†àÏûÑ/Ï¥à Ïù¥Îèô ÏÑ§Ï†ï -->
        <div class="skip-settings-section">
          <div class="skip-settings-title">Ïù¥ÎèôÎüâ ÏÑ§Ï†ï</div>
          <div class="skip-settings-row">
            <label for="frameSkipInput">Shift+ÌôîÏÇ¥Ìëú Ïù¥Îèô ÌîÑÎ†àÏûÑ Ïàò</label>
            <div class="skip-input-group">
              <input type="number" id="frameSkipInput" min="1" max="100" value="10">
              <span class="skip-unit">ÌîÑÎ†àÏûÑ</span>
            </div>
          </div>
          <div class="skip-settings-row">
            <label for="secondSkipInput">Ctrl+ÌôîÏÇ¥Ìëú Ïù¥Îèô Ï¥à</label>
            <div class="skip-input-group">
              <input type="number" id="secondSkipInput" min="0.1" max="10" step="0.1" value="1">
              <span class="skip-unit">Ï¥à</span>
            </div>
          </div>
        </div>
        <div class="shortcut-list" id="shortcutList">
          <!-- JSÏóêÏÑú Î†åÎçîÎßÅ -->
        </div>
        <p class="form-hint">Î≥ÄÍ≤ΩÌïòÎ†§Îäî Îã®Ï∂ïÌÇ§Î•º ÌÅ¥Î¶≠Ìïú ÌõÑ ÏÉàÎ°úÏö¥ ÌÇ§ Ï°∞Ìï©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.</p>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="resetAllShortcuts">Í∏∞Î≥∏Í∞íÏúºÎ°ú Ï¥àÍ∏∞Ìôî</button>
        <button class="btn-primary" id="closeShortcutSettingsBtn">Îã´Í∏∞</button>
      </div>
    </div>
  </div>

  <!-- Cache Settings Modal -->
  <div class="modal-overlay" id="cacheSettingsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Ï∫êÏãú ÏÑ§Ï†ï</h3>
        <button class="modal-close" id="closeCacheSettings">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Ïç∏ÎÑ§Ïùº Ï∫êÏãú -->
        <div class="cache-section">
          <div class="cache-section-header">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
            <span>Ïç∏ÎÑ§Ïùº Ï∫êÏãú</span>
          </div>
          <div class="cache-info">
            <span class="cache-label">ÌòÑÏû¨ ÏÇ¨Ïö©Îüâ</span>
            <span class="cache-value" id="thumbnailCacheSize">Í≥ÑÏÇ∞ Ï§ë...</span>
          </div>
          <button class="btn-secondary btn-sm" id="btnClearThumbnailCache">Ïç∏ÎÑ§Ïùº Ï∫êÏãú ÎπÑÏö∞Í∏∞</button>
        </div>

        <!-- Ìä∏ÎûúÏä§ÏΩîÎî© Ï∫êÏãú -->
        <div class="cache-section">
          <div class="cache-section-header">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>
            <span>Ìä∏ÎûúÏä§ÏΩîÎî© Ï∫êÏãú</span>
          </div>
          <div class="cache-info">
            <span class="cache-label">ÌòÑÏû¨ ÏÇ¨Ïö©Îüâ</span>
            <span class="cache-value" id="transcodeCacheSize">Í≥ÑÏÇ∞ Ï§ë...</span>
          </div>
          <div class="cache-info">
            <span class="cache-label">Ïö©Îüâ Ï†úÌïú</span>
            <div class="cache-limit-control">
              <input type="range" id="cacheLimitSlider" min="1" max="50" value="10" step="1">
              <span class="cache-limit-value" id="cacheLimitValue">10 GB</span>
            </div>
          </div>
          <p class="form-hint">Ïö©Îüâ Ï†úÌïú Ï¥àÍ≥º Ïãú Ïò§ÎûòÎêú Ï∫êÏãúÍ∞Ä ÏûêÎèô ÏÇ≠Ï†úÎê©ÎãàÎã§.</p>
          <button class="btn-secondary btn-sm" id="btnClearTranscodeCache">Ìä∏ÎûúÏä§ÏΩîÎî© Ï∫êÏãú ÎπÑÏö∞Í∏∞</button>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-danger btn-sm" id="btnClearAllCache">Ï†ÑÏ≤¥ Ï∫êÏãú ÎπÑÏö∞Í∏∞</button>
        <button class="btn-primary" id="closeCacheSettingsBtn">Îã´Í∏∞</button>
      </div>
    </div>
  </div>

  <!-- Credits Modal -->
  <div class="credits-overlay" id="creditsOverlay">
    <canvas class="credits-plexus" id="creditsPlexus"></canvas>
    <div class="credits-modal">
      <button class="credits-close" id="creditsClose">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
      <div class="credits-content">
        <img class="credits-logo-img" src="assets/logo/baeframe.png" alt="BAEFRAME">
        <div class="credits-logo">
          <span class="credits-logo-b">B</span>
          <span class="credits-logo-text">AE Frame.</span>
        </div>
        <div class="credits-studio">
          <span class="credits-studio-label">Studio</span>
          <span class="credits-studio-name">JBBJ</span>
        </div>
        <div class="credits-divider"></div>
        <div class="credits-people">
          <div class="credits-person">
            <span class="credits-role">powered by</span>
            <span class="credits-name">_Î∞∞ÌïúÏÜî</span>
          </div>
          <div class="credits-person">
            <span class="credits-role">thanks to</span>
            <span class="credits-name">_Ïú§ÏÑ±Ïõê</span>
          </div>
        </div>
        <div class="credits-version" id="creditsVersion">v1.0.0</div>
      </div>
    </div>
  </div>

  <!-- Thread Popup Modal -->
  <div class="thread-overlay" id="threadOverlay">
    <div class="thread-modal">
      <div class="thread-header">
        <button class="thread-back" id="threadBack">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"/>
          </svg>
        </button>
        <div class="thread-title">
          <span class="thread-title-text">Ïä§Î†àÎìú</span>
          <span class="thread-author" id="threadAuthor"></span>
        </div>
        <div class="thread-actions">
          <button class="thread-action-btn" title="ÏÑ§Ï†ï">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/>
            </svg>
          </button>
          <button class="thread-close" id="threadClose">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="thread-content" id="threadContent">
        <!-- ÏõêÎ≥∏ ÎåìÍ∏Ä -->
        <div class="thread-original" id="threadOriginal"></div>

        <!-- ÎãµÍ∏Ä Í∞úÏàò -->
        <div class="thread-reply-count" id="threadReplyCount"></div>

        <!-- ÎãµÍ∏ÄÎì§ -->
        <div class="thread-replies" id="threadReplies"></div>
      </div>

      <!-- ÎãµÍ∏Ä ÏûÖÎ†• -->
      <div class="thread-input-area">
        <div class="thread-editor-toolbar">
          <button class="editor-btn" data-format="bold" title="ÍµµÍ≤å (Ctrl+B)">
            <strong>B</strong>
          </button>
          <button class="editor-btn" data-format="italic" title="Í∏∞Ïö∏ÏûÑ (Ctrl+I)">
            <em>I</em>
          </button>
          <button class="editor-btn" data-format="underline" title="Î∞ëÏ§Ñ (Ctrl+U)">
            <u>U</u>
          </button>
          <button class="editor-btn" data-format="strike" title="Ï∑®ÏÜåÏÑ†">
            <s>S</s>
          </button>
          <span class="editor-divider"></span>
          <button class="editor-btn" data-format="link" title="ÎßÅÌÅ¨">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
            </svg>
          </button>
          <span class="editor-divider"></span>
          <button class="editor-btn" data-format="bullet" title="Î™©Î°ù">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/>
              <circle cx="4" cy="6" r="1" fill="currentColor"/><circle cx="4" cy="12" r="1" fill="currentColor"/><circle cx="4" cy="18" r="1" fill="currentColor"/>
            </svg>
          </button>
          <button class="editor-btn" data-format="numbered" title="Î≤àÌò∏ Î™©Î°ù">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="10" y1="6" x2="21" y2="6"/><line x1="10" y1="12" x2="21" y2="12"/><line x1="10" y1="18" x2="21" y2="18"/>
              <text x="2" y="8" font-size="8" fill="currentColor">1</text>
              <text x="2" y="14" font-size="8" fill="currentColor">2</text>
              <text x="2" y="20" font-size="8" fill="currentColor">3</text>
            </svg>
          </button>
          <span class="editor-divider"></span>
          <button class="editor-btn" data-format="code" title="ÏΩîÎìú">
            &lt;/&gt;
          </button>
          <button class="editor-btn" data-format="codeblock" title="ÏΩîÎìú Î∏îÎ°ù">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <polyline points="8 10 5 12 8 14"/><polyline points="16 10 19 12 16 14"/>
            </svg>
          </button>
        </div>
        <div class="thread-image-preview" id="threadImagePreview" style="display: none;">
          <img id="threadPreviewImg" src="" alt="Ï≤®Î∂Ä Ïù¥ÎØ∏ÏßÄ">
          <button class="thread-image-remove" id="threadImageRemove" title="Ïù¥ÎØ∏ÏßÄ Ï†úÍ±∞">
            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>
        <div class="thread-editor-wrapper">
          <div class="thread-editor"
               id="threadEditor"
               contenteditable="true"
               data-placeholder="ÎåìÍ∏Ä ÎÇ®Í∏∞Í∏∞... (Ctrl+VÎ°ú Ïù¥ÎØ∏ÏßÄ Î∂ôÏó¨ÎÑ£Í∏∞)"></div>
        </div>
        <div class="thread-input-footer">
          <button class="thread-image-btn" id="threadImageBtn" title="Ïù¥ÎØ∏ÏßÄ Ï≤®Î∂Ä">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
          </button>
          <button class="thread-submit" id="threadSubmit">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Image Viewer Modal -->
  <div class="image-viewer-overlay" id="imageViewerOverlay">
    <div class="image-viewer-content">
      <img class="image-viewer-img" id="imageViewerImg" src="" alt="ÌôïÎåÄ Ïù¥ÎØ∏ÏßÄ">
    </div>
    <button class="image-viewer-close" id="imageViewerClose">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>

  <!-- Ïä§ÌîåÎ¶ø Î∑∞ Ïò§Î≤ÑÎ†àÏù¥ -->
  <div class="split-view-overlay" id="splitViewOverlay">
    <!-- Ïä§ÌîåÎ¶ø Î∑∞ Ìó§Îçî (Ïª®Ìä∏Î°§ Î∞î) -->
    <div class="split-view-header">
      <div class="split-view-mode-controls">
        <button class="split-mode-btn active" id="btnSyncMode" title="ÎèôÍ∏∞ Ïû¨ÏÉù - Îëê ÏòÅÏÉÅÏù¥ Í∞ôÏùÄ ÌîÑÎ†àÏûÑÏóêÏÑú Ìï®Íªò Ïû¨ÏÉùÎê©ÎãàÎã§">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
          </svg>
          ÎèôÍ∏∞ Ïû¨ÏÉù
        </button>
        <button class="split-mode-btn" id="btnIndependentMode" title="ÎèÖÎ¶Ω Ïû¨ÏÉù - Í∞Å ÏòÅÏÉÅÏùÑ Í∞úÎ≥ÑÏ†ÅÏúºÎ°ú Ï†úÏñ¥Ìï©ÎãàÎã§">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
          </svg>
          ÎèÖÎ¶Ω Ïû¨ÏÉù
        </button>
      </div>
      <div class="split-view-actions">
        <button class="split-action-btn" id="btnSwapPanels" title="Ï¢åÏö∞ Ìå®ÎÑê ÍµêÌôò">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="7 16 3 12 7 8"/>
            <polyline points="17 8 21 12 17 16"/>
            <line x1="3" y1="12" x2="21" y2="12"/>
          </svg>
        </button>
        <button class="split-action-btn split-close-btn" id="btnCloseSplitView" title="Ïä§ÌîåÎ¶ø Î∑∞ Îã´Í∏∞">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Ïä§ÌîåÎ¶ø Î∑∞ Î≥∏Ï≤¥ -->
    <div class="split-view-body">
      <!-- Ï¢åÏ∏° Ìå®ÎÑê (Primary) -->
      <div class="split-panel split-panel-left" id="splitPanelLeft" data-panel="left">
        <div class="split-panel-header">
          <div class="split-version-selector" id="splitVersionSelectorLeft">
            <button class="split-version-trigger" id="splitVersionTriggerLeft">
              <span class="split-version-label" id="splitVersionLabelLeft">v1</span>
              <svg class="split-version-arrow" viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
            <div class="split-version-menu" id="splitVersionMenuLeft">
              <!-- Î≤ÑÏ†Ñ Î™©Î°ùÏùÄ JSÏóêÏÑú ÎèôÏ†Å ÏÉùÏÑ± -->
            </div>
          </div>
          <div class="split-panel-badge active-badge" id="splitBadgeLeft">ÌôúÏÑ±</div>
          <div class="split-panel-controls">
            <div class="split-volume-control">
              <button class="split-control-btn" id="btnMuteLeft" title="ÏùåÏÜåÍ±∞ ÌÜ†Í∏Ä">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                  <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                  <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                </svg>
              </button>
              <input type="range" class="split-volume-slider" id="volumeSliderLeft" min="0" max="100" value="100" title="Î≥ºÎ•®">
            </div>
          </div>
        </div>
        <div class="split-video-container" id="splitVideoContainerLeft">
          <video class="split-video" id="splitVideoLeft"></video>
          <canvas class="split-drawing-canvas" id="splitDrawingCanvasLeft"></canvas>
          <div class="split-loading-overlay" id="splitLoadingLeft">
            <div class="loading-spinner"></div>
            <span>Î°úÎî© Ï§ë...</span>
          </div>
          <div class="split-empty-state" id="splitEmptyLeft">
            <div class="split-empty-icon">üìÅ</div>
            <span>Î≤ÑÏ†ÑÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</span>
          </div>
        </div>
      </div>

      <!-- Î¶¨ÏÇ¨Ïù¥Ï†Ä -->
      <div class="split-resizer" id="splitResizer">
        <div class="split-resizer-handle"></div>
      </div>

      <!-- Ïö∞Ï∏° Ìå®ÎÑê (Secondary) -->
      <div class="split-panel split-panel-right" id="splitPanelRight" data-panel="right">
        <div class="split-panel-header">
          <div class="split-version-selector" id="splitVersionSelectorRight">
            <button class="split-version-trigger" id="splitVersionTriggerRight">
              <span class="split-version-label" id="splitVersionLabelRight">v2</span>
              <svg class="split-version-arrow" viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
            <div class="split-version-menu" id="splitVersionMenuRight">
              <!-- Î≤ÑÏ†Ñ Î™©Î°ùÏùÄ JSÏóêÏÑú ÎèôÏ†Å ÏÉùÏÑ± -->
            </div>
          </div>
          <div class="split-panel-badge" id="splitBadgeRight"></div>
          <div class="split-panel-controls">
            <div class="split-volume-control">
              <button class="split-control-btn muted" id="btnMuteRight" title="ÏùåÏÜåÍ±∞ ÌÜ†Í∏Ä">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                  <line x1="23" y1="9" x2="17" y2="15"/>
                  <line x1="17" y1="9" x2="23" y2="15"/>
                </svg>
              </button>
              <input type="range" class="split-volume-slider" id="volumeSliderRight" min="0" max="100" value="0" title="Î≥ºÎ•®">
            </div>
          </div>
        </div>
        <div class="split-video-container" id="splitVideoContainerRight">
          <video class="split-video" id="splitVideoRight"></video>
          <canvas class="split-drawing-canvas" id="splitDrawingCanvasRight"></canvas>
          <div class="split-loading-overlay" id="splitLoadingRight">
            <div class="loading-spinner"></div>
            <span>Î°úÎî© Ï§ë...</span>
          </div>
          <div class="split-empty-state" id="splitEmptyRight">
            <div class="split-empty-icon">üìÅ</div>
            <span>Î≤ÑÏ†ÑÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Ïä§ÌîåÎ¶ø Î∑∞ Í≥µÏú† ÌÉÄÏûÑÎùºÏù∏ (ÎèôÍ∏∞ Î™®Îìú) -->
    <div class="split-view-timeline" id="splitViewTimeline">
      <div class="split-playback-controls">
        <button class="control-btn" id="splitBtnFirst" title="Ï≤òÏùåÏúºÎ°ú">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><polygon points="19 20 9 12 19 4 19 20"/><line x1="5" y1="19" x2="5" y2="5"/></svg>
        </button>
        <button class="control-btn" id="splitBtnPrevFrame" title="Ïù¥Ï†Ñ ÌîÑÎ†àÏûÑ">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 19 2 12 11 5 11 19"/><polygon points="22 19 13 12 22 5 22 19"/></svg>
        </button>
        <button class="control-btn play-btn" id="splitBtnPlay" title="Ïû¨ÏÉù/ÏùºÏãúÏ†ïÏßÄ">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" stroke="none" id="splitPlayIcon"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        </button>
        <button class="control-btn" id="splitBtnNextFrame" title="Îã§Ïùå ÌîÑÎ†àÏûÑ">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 19 22 12 13 5 13 19"/><polygon points="2 19 11 12 2 5 2 19"/></svg>
        </button>
        <button class="control-btn" id="splitBtnLast" title="ÎÅùÏúºÎ°ú">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
        </button>
      </div>
      <div class="split-seekbar-container">
        <div class="split-seekbar" id="splitSeekbar">
          <div class="split-seekbar-progress" id="splitSeekbarProgress"></div>
          <div class="split-seekbar-handle" id="splitSeekbarHandle"></div>
        </div>
      </div>
      <div class="split-timecode" id="splitTimecode">
        <span id="splitTimecodeCurrent">00:00:00:00</span>
        <span class="split-timecode-sep">/</span>
        <span id="splitTimecodeTotal">00:00:00:00</span>
      </div>
      <div class="split-frame-info" id="splitFrameInfo">24fps ¬∑ Frame 0</div>
    </div>
  </div>

  <!-- Ïª§Ïä§ÌÖÄ Prompt Î™®Îã¨ -->
  <div class="prompt-modal-overlay" id="promptModalOverlay">
    <div class="prompt-modal">
      <div class="prompt-modal-header">
        <span class="prompt-modal-title" id="promptModalTitle">ÏûÖÎ†•</span>
        <button class="prompt-modal-close" id="promptModalClose">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="prompt-modal-body">
        <label class="prompt-modal-label" id="promptModalLabel">Í∞íÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî:</label>
        <input type="text" class="prompt-modal-input" id="promptModalInput" />
      </div>
      <div class="prompt-modal-footer">
        <button class="btn btn-secondary prompt-modal-cancel" id="promptModalCancel">Ï∑®ÏÜå</button>
        <button class="btn btn-primary prompt-modal-confirm" id="promptModalConfirm">ÌôïÏù∏</button>
      </div>
    </div>
  </div>

  <script type="module" src="scripts/app.js"></script>
</body>
</html>
